UNIVERSITE LIBANAISE                                  UNIVERSITE SAINT-JOSEPH
      (Faculté de Génie)                                                       (Faculté d'Ingénierie)






Sous l'égide de l'Agence Universitaire de la Francophonie
AUF



Diplôme d'Etudes Approfondies
Réseaux de télécommunications





Etudes des protocoles de mobilité inter-domaine des réseaux sans fils

Par

Rana Rahim




Encadré par : M. Hossam Afifi 
                      M. Bachar El-Hassan




Soutenance le Mardi 23 décembre 2003 devant le jury composé de

      MM. Samir  Tohmé	        Président
       						         Mohamad Zoaeter      Membre	
 						         Wajdi Najem              Membre
         Imad Mougharbel       Membre
         Nicolas Rouhana        Membre
         Mahmoud Doughan   Membre
         Maroun Chamoun      Membre
      
 Table de matières
      
Sommaire
1
Introduction
3
CHAPITRE I  Un coup d'oeil sur la norme GPRS
7
       I.1 les caractéristiques du GPRS
7
       I.2 Architecture générale du GPRS
7
          I.2.1 Réseau fédérateur GPRS
7
          I.2.2 Architecture en couches
8
          I.2.2.1 Plan usager ou de transmission
8
          I.2.2.2 Plan de contrôle ou de signalisation
8
          I.2.2.3 Couches communes aux plans de signalisation et de transmission
9
CHAPITRE II  Un coup d'oeil sur la norme UMTS
10
       II.1 Constitution du réseau UMTS
10
       II.2 Réseau coeur et réseau d'accès
10
          II.2.1 Le réseau coeur
11
          II.2.2 Les composants du réseau coeur
11
          II.2.2.1 Le groupe des éléments communs
12
             II.2.2.2 Le groupe des éléments du domain CS
12
             II.2.2.3 Le groupe des éléments du domaine PS
12
          II.2.3 Le réseau d'accès UTRAN
13
          II.2.3.1 Les différents constituants
13
       II.2.3.2 L'interface radio de l'UTRAN
13
          II.2.3.2.1 L'architecture en couches
14
          II.2.3.2.2 Cas d'un paquet IP
15
          II.2.3.2.3 Cas du transport de la voix
15
                II.2.3.2.4. Protocoles réseaux
15
          II.2.4 UMTS Handover
15
             II.2.4.1 Introduction
15
 II.2.4.2 Les catégories du Handover
16
          II.2.4.3 Les Différents types de mesures d'interface d'air 
17
       II.2.4.4 L'optimisation de Handover 
17
CHAPITRE III  La norme IEEE 802.11
19
       III.1 Architecture du réseau 802.11
19
       III.2 Modèle en couche
21
       III.3 Architecture protocolaire du IEEE802.11
21
       III.4 l'architecture de base du WLAN IEEE 802.11
22
       III.5 La technologie Radio
22
       III.6 Accès Multiple
24
       III.7 L'adressage Logique 
26
       III.8 La sécurité
26
    III.9 La synchronisation et la gestion de puissance
26
    III.10 Roaming
27
       III.11 L'alliance sans fil de compatibilité d'Ethernet
27
    III.12 Etalonnage du Wireless LAN
27
       III.13 Wi-Fi (Wireless Fidelity)
28
        III.13.1 Les différentes normes WiFi
28
       III.14 IAPP Inter-Access Point Protocol
31
      III.14.1 La relation entre IAPP et IEEE 802.11
32
      III.14.2 Définition du protocole IAPP
33
           III.14.2.1 IAPP Announce Protocol
33
           III.14.2.2 IAPP Handover Protocol  
34
           III.14.2.3 WMP Station Announce Protocol
36
CHAPITRE IV  Le réseau Bluetooth 
38
       IV.1 Utilisation du réseau Bluetooth 
38
       IV.2 Architecture du réseau Bluetooth 
39
       IV.3 Principe de fonctionnement
39
   IV.3.1 Les liaisons synchrones à débit élevé
41
            IV.3.2 Les liaisons asynchrones
41
            IV.3.3 Les canaux voix/données
42
       IV.4 La communication sous Bluetooth 
42
       IV.5 Les paquets Bluetooth 
42
       IV.6 Les protocoles de connexion Bluetooth 
44
       IV.7 Les picoréseaux et la sécurité
46
       IV.8 Mode d'emploi
46
       IV.9 Fréquence et puissance
46
       IV.10 Configuration d'utilisation de Bluetooth 
47
       IV.11 Handover dans Bluetooth 
48
             IV.11.1 Introduction
48
       IV.11.2 Limitations principales qui empêchent l'adoption large de Bluetooth 
48
      IV.11.3 Quelques propositions du Handover dans Bluetooth 
48
         IV.11.3.1 Le mécanisme de base
49
            IV.11.3.2 Les défis
50
                     IV.11.3.2.1 La latence de découverte
50
                     IV.11.3.2.2 La nécessité de se connecter pour identifier l'AP
50
                     IV.11.3.2.3 La manque de RSSI
51
      IV.11.4 Optimisations
52
               IV.11.4.1 La communication entre les APs
52
               IV.11.4.2 Un nombre optimisé de handover de AP
53
                  IV.11.4.3 Obtenir la liste des APs voisins
53
               IV.11.4.4 Construire la liste des Aps voisins
54
               IV.11.4.5 La présence de AP vérifiant (AP sondant) 
54
               IV.11.4.6 Evaluation de la position
55
               IV.11.4.7  PiggyBack RSSI 
55
               IV.11.4.8  Connexion rapide d'AP
56
         IV.11.5 La solution BlueWIN
57
               IV.11.5.1 La structure de BlueWIN
57
            IV.11.5.2 Le procédé de Handover
58
            IV.11.6 Les conclusions
58
CHAPITRE V  Handover Vertical
59
       V.1 C'est quoi L'accès multiple 
59
       V.2 Description du Handover vertical
60
       V.3 Pourquoi le Handover Vertical
60
       V.4 IP mobile 
61
          V.4.1 Description
61
          V.4.2 Associations
62
       V.5 Handover vertical sous Mobile IP
62
          V.5.1 Introduction
62
          V.5.2 Caractérisation du processus de HANDOFF
63
             V.5.2.1 La décision de Handoff
64
       V.5.2.2 L'Exécution du Handoff
64
          V.6 Mobile IP VPN (Virtual Private Network)
66
 V.6.1 Introduction 
66
       V.6.2 Mettre Mobiles VPNs en application 
67
       V.6.3 La Gateway mobile et la capacité de VPN 
68
       V.6.4 Les connexions fiables et à l'échelle des réseaux VPN
68
       V.6.5 Insuffisances de IKE pour Mobile IPv6
69
         V.7 Le handover vertical utilisant MVPN
70
V.7.1 Introduction
70
      V.7.2 Le système proposé
70
CHAPITRE VI  Le  travail de Simulation
72
       VI.1 Divers cas de simulation
72
       VI.2 Le scénario de départ
72
       VI.3 BlueHoc
74
       VI.4 Le nouveau scénario
75
       VI.5 Noeud à 2 interfaces
76
       VI.6 SCTP Agents
77
       VI.7 Quelques commandes utilisées dans SCTP
78
       VI.8 Evaluation du temps de connexion d'un noeud esclave dans Bluetooth 
79
            VI.8.1 Premier cas
80
      VI.8.2 Deuxième cas 
81
      VI.8.3 Troisième cas
82
       VI.9 Problèmes
83
Conclusions et Perspectives
84
Annexes
86
References
93



Sommaire
      
      Le but de ce stage était de faire une étude sur les temps inhérents aux protocoles des réseaux sans fil GPRS, UMTS, WiFi et Bluetooth pour comprendre les bornes maximales et minimales infligées à une opération de Handover (changement de cellule) dans le but d'arriver à la fin à l'étude du changement entre des technologies différentes souvent appelé Handover vertical. Ce stage est composé de deux parties. La première consiste à voir chaque technologie à part. La seconde consiste à étudier le Handover vertical.
      
      Pour cela j'ai commencé par une étude bibliographique rapide des normes GPRS, UMTS, une étude poussée de la norme IEEE 802.11 et particulièrement de IEEE802.11f qui s'occupe de roaming intertechnologies, le protocole étudié est l'IAPP Inter Access Point Protocol, et finalement j'ai étudié le réseau Bluetooth.
      
      Ayant étudié ces différentes normes, je me suis dirigée dans mon étude vers le Handover Vertical, qui est au coeur de mon sujet.
      
      Un handover vertical est défini comme handover entre les stations de base qui emploient différentes interfaces de réseau sans fil (wireless network interface), comparé au handover horizontal qui est un handover entre différentes stations de base avec la même interface de réseau sans fil. 
      
      Le handover vertical est une technique qui permet à un utilisateur mobile d'errer entre les réseaux sans fil multiples d'une sorte complètement transparente aux applications et aux utilisateurs et qui perturbe le moins possible la connexion. Une fois on se trouve en dehors de la gamme, le système devrait automatiquement commuter à une autre station de base, sans se déconnecter. S'il y a plus d'une interface disponible le système devra décider laquelle il faut employer. Plusieurs essais ont indiqué qu'un Handover vertical est possible avec de petits délais.
      
      Le but de Vertical Handover est de réaliser plusieurs accès en temps réel dans les réseaux hétérogènes. Ceci permet à un utilisateur d'utiliser plusieurs réseaux (tels qu'IPv4, WLAN, GPRS, UMTS, et 2G/3G) en parallèle.
      
      Les problèmes à surmonter lors du Handover vertical sont ceux de réservation de la connexion quand il faut commuter entre différentes interfaces. Plus spécifiquement le problème est de maintenir une connexion ouverte, il faut alors  avoir la même adresse d'IP quoiqu'il y ait un changement de sous-réseaux (en raison de changement d'interfaces).
      
       Afin d'aboutir à cette fin, l'IPv6 mobile est utilisé, il peut jouer un rôle principal en intégrant les différentes technologies de la couche liaison, avec la promesse de permettre la mobilité transparente par l'utilisation d'une couche réseau unifiée.
      
      Un processus de handover dans IPv6 mobile est composé de deux étapes principales une décision et une exécution de handoff. 
      
      Notons que dans le but d'avoir une connexion non pas seulement mobile mais encore sécurisée sans aucune intervention de l'utilisateur, on se trouve à l'instant dévié à utiliser les MIVPN (Mobile IP Virtual Private Network).
      
      Afin d'arriver à notre but, nous avons besoin de Mobile IP pour maintenir la mobilité d'une façon transparente et sans aucune intervention de l'utilisateur. Ainsi que d'IPSec qui est le standard de sécurité et qui est employé dans la plupart des VPNs pour maintenir la sécurité. Cela active alors une connexion automatique et sécurisée quand l'utilisateur se déplace vers un réseau non sécurisé.
      
      Une fois j'ai étudié le Handover Vertical d'une façon globale entre n'importe quel type de réseaux, j'ai convergé mon étude et elle se trouve alors concentrée sur le Handover entre le réseau local sans fil (WLAN) et le Bluetooth.
      
      D'autre part, le stage n'a pas été restreint à une recherche seulement, un ensemble de cas est simulé à l'aide d'un logiciel de simulation de réseaux.
      
      Le logiciel utilisé est le ns Network Simulator, ce choix revient au fait que les simulateurs courants fournissent rarement des outils pour la visualisation et l'interprétation des résultats, par contre NS possède autre que  le simulateur un NAM pour la visualisation.
      
      Dans la simulation, j'ai travaillé sur Wifi et Bluetooth seulement, alors elle a été divisée en trois parties :
    
    1- La première consiste à regarder combien dure l'étape de découverte et d'établissement de connexion entre un noeud esclave et un noeud maître dans Bluetooth.

2- La seconde consiste à essayer de créer un noeud à 2 interfaces, une interface Wifi et une autre Bluetooth.
      
      Ces 2 parties ont été faites dans le but d'arriver à faire la troisième.
    
    3- La troisième consiste à essayer de simuler un Handover vertical entre un réseau Wifi et un réseau Bluetooth, le code de cette partie a été fait sans l'exécution et l'obtention des résultats.
      


      
      	

 Introduction
      
      Le monde recherche de plus en plus la mobilité et de nouveaux moyens de communication sans fil: Téléphonie sans fil, ordinateurs sans fil, organiseurs sans fil. Mais un appareil sans fil ne signifie pas seulement un dispositif qui peut fonctionner seul grâce à ses batteries. Le nouvel univers du sans fil est aussi celui d'un univers complètement connecté. Des appareils connectés l'un avec l'autre et avec le Web sans fil, des gens connectés les uns aux autres grâce à des appareils sans fil et connectés à l'Internet pendant leurs déplacements.
      Le monde est toujours en état d'évolution, de nouveaux réseaux se trouvent  posés au marché et surtout des réseaux sans fils. La gestion de ce type de réseaux (sans fil) devient de plus en plus populaire, les infrastructures des réseaux hétérogènes croissent. D'où la nécessité de passer d'un réseau à un autre croît et par suite se bouger librement entre les différents nets tout en gardant toujours la connexion courante, et en minimisant autant que possible les pertes (mobilité transparente). Cela peut prendre le nom de l'utilisation simultanée de différents réseaux d'accès et des technologies.
      
      De plus, avec l'accroissement rapide de l'accès mobile à l'Internet, et son augmentation suite à la popularité croissante de WiFi (WLANs basés sur IEEE 802.11b), et le déploiement mondial des réseaux sans fil de large secteur tels que GPRS et la troisième génération des réseaux sans fils, un nombre de plus en plus important de dispositifs mobiles tels que des laptops et PDAs est équipé pour se connecter aux réseaux multiples.
      Différentes évolutions sont en cours aussi bien pour permettre des extensions pour la sécurité, la qualité de service et le handover que pour améliorer le débit, la couverture et permettre les réseaux ad-hoc et la cohabitation avec les autres types de réseau. 
      Des réseaux sans fil  tels que GPRS et WLANs peuvent être arrangés comme recouvrement sur la base de leur couverture offerte ; un tel arrangement est connu comme réseau sans fil de recouvrement (wireless overlay network).  Par exemple, GPRS ou 3G peut fournir l'assurance nationale ou des larges continents, alors que WLANs basés sur 802.11b fournirent seulement une couverture locale sans fil ainsi que pour Bleutooth. Un mobile peut choisir de faire un handover vertical entre les différents réseaux ou non selon la couverture offerte, ou selon des politiques telles que la largeur de bande de réseau, la charge, le coût, la sécurité, la QoS, ou même la préférence d'utilisateur.
      
      Les conséquences de l'utilisation des réseaux multiples en parallèle sont loin d'être négligeables. Ces conséquences découlent directement des utilisations que les gens en font, utilisations prévues ou inattendues. 

      Tout d'abord et avant de commencer notre étude, quelques idées nécessitent d'être clarifiées et fixées. 

   a. «Sans Fils» ne signifie pas toujours «mobile» :
   La mise en place d'une solution de communication sans fils n'implique pas automatiquement que les terminaux deviennent mobiles, par exemple : un téléphone sans-fils de type DECT n'est pas mobile, il est rattaché à une station de référence, il en est de même avec Wi-Fi, une fois une liaison établie, le terminal est rattaché à un point d'accès, et il ne peut changer de point d'accès sans établir une nouvelle liaison, et donc rompre la précédente.

   b. «Mobile» ne signifie pas «Itinérant»
* La mobilité (handover) : C'est la possibilité de se déplacer d'un point d'accès à un autre sans perdre la connexion en cours. Les communications deviennent donc indépendantes de la localisation.

* L'itinérance (roaming) : C'est la possibilité de se déplacer d'un opérateur à un autre sans perdre la liaison en cours. C'est aussi la possibilité de passer d'un protocole de niveau liaison à un autre sans perdre la connexion en cours, par exemple entre  Wi-Fi et Bluetooh, ou entre WiFi et GPRS.
   Un terminal peut donc être mobile sans être itinérant.

      Les réseaux sans fil (Wireless) et/ou mobiles :
      Un réseau sans fil substitue aux habituels câbles des connexions via les ondes radioélectriques. A cette fin, ces bornes sont installées pour délimiter une zone de couverture ; les utilisateurs peuvent en profiter à condition de disposer d'un adaptateur pour émettre et recevoir sur ce réseau. Cet adaptateur peut prendre la forme d'un boîtier, d'une carte PCI ou encore, pour les ordinateurs portables, d'une carte au format PCMCIA. A noter que la majeure partie des procédés mis en oeuvre utilisent la même plage de fréquence (2,4 gigahertz).
      Il existe plusieurs standards de réseaux locaux ou personnels sans fil (WLAN et PAN): Bluetooth, IEEE 802.11b, Hiperlan, ou même DECT...
      Ces standards permettent à un terminal mobile de communiquer avec une base fixe, mais ils ne sont pas prévus pour permettre de passer d'une base fixe à une autre comme les systèmes mobiles cellulaires. Ils sont donc plus particulièrement adaptés à des réseaux locaux dans des lieux identifiés (Maison, classe d'école, société, hall d'aéroport).
      Les prochaines évolutions des systèmes mobiles permettront d'intégrer ces diverses technologies avec celles des standards mobiles de 3ème génération dans le même terminal pour permettre une communication "sans couture" et en permanence, quelque soit l'endroit où l'on se trouve.

      On distingue les différents types suivants :
      a. Les réseaux sans fil à échelle humaine (WPAN, Wireless Personal Area Network)
      La portée de ce type de réseaux sans fil est limitée, de l'ordre de quelques mètres autour de l'usager. Ils permettent l'échange de données rapprochées entre micro-ordinateurs, périphériques, assistants personnels numériques, téléphones portables ou tout appareil électronique grand public. Par rapport à la connexion filaire, ils apportent une grande souplesse d'utilisation. Ex : Bluetooth (longueur d'ondes radio, débit 720 Kbps).

      On dit que ce type de réseaux se déplace avec l'usager, pas de station relais.

      b. Les réseaux domestiques (HAN, Home Area Network)
      Ce sont des réseaux qui couvrent une localisation fixe. Leur portée peut aller jusqu'à quelques dizaines de mètres. Leur débit varie fortement en fonction de la distance. La cible de ce type de réseaux est essentiellement la résidence d'habitation privée. Ex : DECT

      c. Les réseaux locaux sans fil (WLAN, Wireless Local Area Network)
      Ils sont faits pour interagir avec des infrastructures filaires. Ce sont les réseaux sans fil qui ont les meilleures performances en débit et en portée. On peut utiliser ce type de réseaux dans deux cas de figure : soit dans des locaux privés (bureaux, salles de conférences), soit dans un environnement public (aéroports, hôtels, restaurants), avec des restrictions.
      Les réseaux WLAN sont très proches des réseaux WPAN. Les différences majeures sont une meilleure portée et un meilleur débit théorique ; mais là aussi le débit est grandement fonction de la distance d'utilisation. Ex : IEEE 802.11, HiperLAN.

      On dit que ces 2 types de réseaux (HAN et WLAN) couvrent une localisation fixe c.à.d. requièrent une station relais.

      d. Les réseaux larges sans fil (WWAN, Wireless Wide Area Network)
      Ce sont essentiellement les réseaux cellulaires utilisés par les opérateurs de téléphonie portable, exemple :
* Voix : GSM, CDMA, Imode, DCS 1800
* Voix, Données : GPRS
* Voix, Données (y compris de la vidéo numérique) : UMTS
   C'est dans cette catégorie qu'entrent les réseaux satellitaires (GlobalStar, Iridium).

      But du projet
      
      Cette introduction générale était fort bien nécessaire pour situer notre projet. En effet, face à cette grande diversité de réseaux existants à notre temps et ayant la tentative de nous sentir totalement libre et mobile lors de nos communications, il était temps pour étudier le Handover entre les différentes technologies existantes sans aucune coupure et avec un minimum possible de pertes, ce mécanisme est appelé le Handover Vertical.

      L'objectif de notre projet est donc d'étudier le Handover Vertical ainsi que les méthodes utilisées pour le réaliser. Mais avant de le faire, nous allons présenter brièvement chacune des normes GPRS, UMTS, IEEE802.11 et Bluetooth, tout en insistant sur les deux dernières qui vont être l'objet de notre simulation après.
      
      
      
Pour satisfaire notre cahier de charge, la suite de ce rapport va être comme suit:
Première partie : Etude des divers types des réseaux sans fils:

1. Etude rapide de la norme GPRS, de ses caractéristiques ainsi que de l'architecture générale de son réseau, ça va former l'objet du premier chapitre I.
2. Etude rapide de la norme UMTS, de la constitution du réseau ainsi que des diverses catégories de handover dans UMTS, cette étude fera l'objet du chapitre II.
3. Etude approfondie de la norme 802.11. Je l'ai commencée par la présentation de l'architecture du réseau 802.11, ensuite j'ai passé à l'étude de la technologie radio utilisée, pour arriver après à présenter les différentes normes WiFi et leurs caractéristiques d'une façon brève, enfin je me suis intéressée à exposer le protocole IAPP de point d'Inter-Accès d'IEEE 802.11f qui soutient l'interopérabilité de fournisseur de point d'accès, permettant le roaming  des stations 802.11 dans des IP subnets. Cette étude aura lieu dans le chapitre III.
4. Etude de la technologie de communication radiofréquence courte distance Bluetooth. Je l'ai commencée par la présentation des domainnes d'utilisation de Bleutooth, puis j'ai parlé de l'architecture de Bluetooth tout en démontrant la manière avec laquelle se fait la communication entre un maître et un esclave pour établir la connexion, finalement il était nécessaire d'évoquer le handover dans Bluetooth tout en présentant quelques propositions possibles vue que jusqu'à maintenant, il n'y a pas une méthode standard pour le handover dans Bluetooth. Cette étude aura lieu dans le chapitre IV.

Deuxième partie : 

      Etude du Handover Vertical, tout d'abord j'ai commencé par présenter l'idée de base,  l'accès multiple. Puis je me suis passée à la description du Handover Vertical, pour passer ensuite à noter les besoins qui ont fait du Handover Vertical une nécessité. Après cette importante introduction j'ai parlé des méthodes possibles pour faire le handover vertical, elles se basent sur l'utilisation de Mobile IP, ou de MIVPN Mobile IP Virtual Private Network, que j'en ai parlé encore dans le but de clarifier leurs rôles dans le mécanisme de Handover Vertical. Cette étude fera l'objet du chapitre V.

Troisième partie :

      Présentation du travail fait en simulation, du choix du logiciel, des divers cas simulés et des résultats obtenus. Cela fera l'objet du chapitre VI.

      Enfin nous essayons de tirer les conclusions qui s'imposent et nous proposons quelques perspetives pour le développement futur de ce travail.
      
      Nous avons rassemblé à la fin de notre manuscrit quelques annexes utiles et bien entendu une bibliographie complète.




CHAPITRE I        Un coup d'oeil sur la norme GPRS

      Introduction
      Le service GPRS, General Packet Radio Service, définit une architecture de réseaux à commutation par paquets avec gestion de la mobilité et accès par voie radio. Un réseau GPRS comprend des abonnés propres, mobiles ou fixes, et peut être relié à divers réseaux de données fixes reposant sur différents protocoles : IP mais aussi X.25, protocole orienté connexion de l'ITU (International Telecommunication Union). Notons que le protocole réseau, quel qu'il soit, est désigné sous le terme générique de PDP, Packet Data Protocol.
      Dans le cas où GPRS offre un service IP, un terminal GPRS dispose d'une adresse IP dont le champ réseau est spécifique au réseau GPRS, d'autre part tout mobile GPRS dispose d'un IMSI et il est identifié au sein du réseau avec son IMSI.
      Les recommandations GPRS reprennent l'architecure du BSS mais définissent une architecture de réseau fixe différente du NSS, ce dernier étant plutôt dédié à la commutation de circuit. La gestion de l'itinérance reprend les principes et l'architecture de GSM. Avec GPRS, le BSS devient un sous-réseau d'accès multiservice : il peut être relié à un NSS classique et à un réseau fédérateur GPRS. Il est cependant possible de déployer un réseau GPRS pur sans NSS. Les principes de GPRS reprennent les concepts d'IP mobile et de CDPD, Cellular Digital Packet Data, développé aux Etats-Unis.
Un des intérêts du GPRS est de profiter du multiplexage statistique dans le BSS par l'utilisation de la transmission par paquets sur la voie radio. Ainsi, plus d'un slot par trame TDMA peuvent être utilisés avec GPRS ce qui permet d'atteindre un débit théorique jusqu'à 171.2 kbit/s. 
Notons que les fonctions de sécurité disponibles dans GSM en mode circuit sont également prévues dans GPRS : authentification de l'abonné, confidentialité de l'identité de l'utilisateur et des informations transmises.

   I.1 les caractéristiques du GPRS 
* Commutation de paquet (de données) dans un réseau GSM (phase 2+)
* Débit variable (9,6Ks à 144Ks)
* Point à Point/ Point à MultiPoint
* Facturation : au volume

   I.2 Architecture générale du GPRS
   I.2.1 Réseau fédérateur GPRS
   Le réseau GPRS est un réseau à datagrammes IP constitué de routeurs IP. Il existe deux types de routeurs IP : ceux qui permettent aux paquets de circuler à l'intérieur d'un même réseau GPRS et ceux qui permettent aux paquets de migrer vers d'autres réseaux de données (IP, X25, autre réseau GPRS), appelés plus généralement réseaux PDP :
* Le noeud de service GPRS (SGSN, Serving GPRS Support Node) est relié aux BSC du sous-système radio (BSS) de GSM et gère les MS présentes dans une zone donnée. Son rôle est de délivrer des paquets aux MS, issus du PLMN.
* Le noeud passerelle GPRS (GGSN, Gateway GPRS Support Node) sert de passerelle entre les SGSN du réseau GPRS et les autres réseaux de données. Il permet aux paquets issus de réseaux PDP externes d'être acheminés vers le SGSN de leur destinataire ou de router les paquets issus du réseau GPRS auquel il appartient vers le réseau extérieur adéquat.
   L'ensemble des SGSN, GGSN et éventuels routeurs IP vers des réseaux IP extérieurs forme le réseau fédérateur GPRS. Chaque SGSN et GGSN possède une adresse IP fixe au sein de ce réseau. 
   I.2.2 Architecture en couches
   Deux plans sont à distinguer dans GPRS : le plan usager (transmission) et le plan de contrôle (signalisation).
   
   I.2.2.1 Plan usager ou de transmission
* Côté réseau fédérateur : le routage vers des terminaux utilise le principe de l'encapsulation et des protocoles tunnel GTP (GPRS Tunnel Protocol). L'encapsulation consiste à placer une suite d'éléments binaires PDU (Packet Data Unit) issus d'une couche n entre l'en-tête et la séquence de contrôle d'erreur de la couche inférieure n-1. Le protocole de la couche n-1 ne s'intéresse pas à la nature des données transportées par la couche n. Dans GPRS, des datagrammes IP ou des paquets X25 sont encapsulés dans des datagrammes IP. Les datagrammes IP contiennent les adresses des SGSN et GGSN concernés. Le réseau IP se comporte comme un tunnel vis à vis des paquets X25 qui entrent à une extrémité du réseau pour en sortir à l'autre bout. Le protocole GTP du SGSN et du GGSN établit une liaison de données entre la station mobile et son SGSN en utilisant le principe du passage en tunnel entre le SGSN et le GGSN. Le protocole GTP s'appuie soit sur TCP, Transport Control Protocol (fiable), soit sur UDP, User Datagram Protocol (non fiable mais temps-réel) selon la nature des données à transmettre. La norme requiert que les deux types de protocoles de transport soient disponibles entre le SGSN et le GGSN dans le plan de transmission.
* Côté BSS : le protocole SNDCP (Subnetwork Dependent Convergence Protocol) du SGSN multiplexe plusieurs PDU de différents réseaux PDP, et effectue une compression et une segmentation des PDU de niveau réseau (appelés PDU PDP) avant de les transmettre à la couche LLC.

   I.2.2.2 Plan de contrôle ou de signalisation
   Lorsqu'un réseau combine le mode GPRS-paquet et le mode GSM-circuit, il est nécessaire que le SGSN dialogue avec les HLR, EIR et le MSC/VLR pour coordonner la gestion de la localisation. De même le GGSN dialogue avec le HLR. Les dialogues utilisent les protocoles MAP (SGSN - HLR ou EIR et GGSN - HLR) et BSSAP+ (SGSN - MSC/VLR),  cette dernière est une adaptation du BSSAP.
   Sur le réseau d'accès, la couche réseau comprend deux sous-couches :
* La sous-couche SM (Session Management) permet au mobile de demander la mémorisation d'un contexte PDP (Packet Data Protocol) dans le SGSN et GGSN. Ainsi les paquets du réseau PDP externe sont routés par le GGSN vers le SGSN sans consultation de la base de données de localisation.
* La sous-couche GMM (GPRS Mobility Management) gère l'itinérance du terminal mobile dans le réseau.
   I.2.2.3 Couches communes aux plans de signalisation et de transmission
* La couche LLC, Logical Link Control, assure des échanges de données entre le mobile et le SGSN, elle prend également en charge le chiffrement spécifique à GPRS.
* La couche RLC (Radio Link Control) fournit une liaison entre le mobile et le BSS. Ce protocole dépend étroitement de l'inrterface radio utilisée.
* La couche MAC (Medium Access Control) contrôle l'accès au canal radio, elle alloue des ressources au mobile uniquement lorsque celui-ci a des données à transmettre et permet ainsi le multiplexage statistique.
* Le BSSGC (BSS GPRS Control) transporte des informations de routage et de qualité de service entre le BSS et le SGSN, il permet la retransmission automatique des trames par le BSS et assure que le BSS est transparent aux données utilisateurs GPRS.
La figure suivante montre l'architecture du réseau GPRS :



      
      La norme GPRS étant décrite, il faut alors définir la norme UMTS et voir si ellle a des points communs avec la précédente. Cette étude fera l'objet du chapitre suivant.
      
CHAPITRE II       Un coup d'oeil sur la norme UMTS

      Introduction
      UMTS, Universal Mobile Telecommunications Service, est l'approche européenne aux systèmes mobiles de la troisième génération (normalisé par ETSI) et il peut être vu comme «successeur» de GSM.
l'UMTS est conçu de manière à proposer les débits suivants :
- 144 kbits/s en environnement extérieur,
- 384 kbits/s en environnement urbain extérieur,
- 2 Mbits/s usager quasiment immobile et proche de l'antenne d'émission de la cellule.

      Un système mondial requiert en effet des bandes de fréquences et un moyen d'utilisation communs. L'objectif a été partiellement atteint : en Europe et au Japon, la même interface air ou radio (WCDMA) doit être utilisée, mais en Amérique du Nord, aucun spectre supplémentaire n'est disponible (ils ont déjà été vendus pour les systèmes 2G), donc une autre technique sera utilisée.
UTRAN, Universal Terrestrial Radio Interface Network, est un compromis entre deux modes : FDD-WCDMA et TDD-WCDMA, c'est une solution mixte qui permet une utilisation complète des bandes des fréquences allouées par l'IMT-2000 (International Mobile Telephony 2000). En effet, les fréquences appariées devront être traitées en mode FDD-WCDMA tandis que les non-appariées devront être traités en mode TDD-WCDMA.

      II.1 Constitution du réseau UMTS
      Dans UMTS on trouve une séparation de la couche d'accès du reste du réseau, ce qui accroît l'évolutivité de la norme UMTS. Cela permettra de faire évoluer l'interface radio en minimisant les impacts sur les équipements du réseau. 

      II.2 Réseau coeur et réseau d'accès
      Le réseau UMTS est composé d'un réseau coeur et d'un réseau d'accès. L'interface entre ces deux réseaux est appelée "Iu". Cette interface a été définie d'une manière aussi générique que possible afin d'être capable de connecter, en plus de l'UTRAN situé entre le relais radio appelé NodeB et le réseau coeur de l'UMTS, des réseaux d'accès de technologies différentes au réseau coeur de l'UMTS.

Architecture du réseau UMTS avec les réseaux d'accès GSM et UTRAN

      II.2.1 Le réseau coeur
      Le réseau coeur de l'UMTS est scindé en 2 domaines de service.
* le CS (Circuit Switched) domain,
* le PS (Packet Switched) domain. 
      Le domaine CS est utilisé pour la téléphonie tandis que le domaine PS permet la commutation de paquets (utilisé pour les données, Internet...). Ainsi les téléphones de 3° génération peuvent gérer simultanément une communication paquet et circuit. Cette notion de domaine permet de modéliser la notion de service dans le réseau coeur et donne la possibilité de créer ultérieurement d'autres domaines de service.
      Les éléments du réseau coeur sont répartis en 3 groupes, comme l'illustre la figure ci-dessous. Le domaine CS comprend le MSC, le GMSC et le VLR. Le domaine PS comprend le SGSN et le GGSN. Le dernier groupe comprend les éléments communs aux domaines PS et CS, le HLR, l'EIR, et l'AuC.

Le réseau coeur de l'UMTS

      II.2.2 Les composants du réseau coeur
      II.2.2.1 Le groupe des éléments communs
* Le HLR (Home Location Register) est la base de données contenant les informations relatives à l'abonné gérées par l'opérateur. Pour chaque abonné, le HLR mémorise les informations suivantes : 
* les informations de souscription (abonnement, souscription à tel service, débit maximal autorisé, etc...) 
* l'identité du mobile, ou IMSI (International Mobile Sation Identity)
* le numéro d'appel de l'abonné.
* Le AuC (Authentication Center) est un élément permettant au réseau d'assurer certaines fonctions de sécurité, telles que l'authentification de l'abonné, le chiffrement de la communication. Ces 2 fonctions de sécurité sont activées au début de l'établissement de l'appel avec l'abonné. En cas d'échec d'une d'entre elles, l'appel est rejeté. L'AuC est couplé au HLR et contient pour chaque abonné une clé d'identification lui permettant d'assurer les fonctions d'authentification et de chiffrement.
 
* L'EIR (Equipment Identity Register) est un équipement optionnel destiné à lutter contre le vol des terminaux mobiles. L'EIR est en fait une base de données contenant la liste des mobiles interdits (black list). L'identification du mobile se fait grâce à son IMEI (International Mobile Station Equipement Identity).

      II.2.2.2 Le groupe des éléments du domain CS 
* Le MSC (Mobile-services Switching Center) est un commutateur de données et de signalisation. Il est chargé de gérer l'établissement de la communication avec le mobile.
* Le GMSC (Gateway MSC) est un MSC un peu particulier servant de passerelle entre le réseau UMTS et le RTCP (Réseau Téléphonique Commuté Public). Lorsqu'on cherche à joindre un mobile depuis un réseau extérieur à l'UMTS, l'appel passe par le GMSC, qui effectue une interrogation du HLR avant de router l'appel vers le MSC dont dépend l'abonné.
* Le VLR (Visitor Location Register) est une base de données attachée à un ou plusieurs MSC. Le VLR est utilisé pour enregistrer les abonnés dans une zone géographique appelée LA (Location Area). Le VLR contient des données assez similaires à celles du HLR. Le VLR mémorise pour chaque abonné plusieurs informations telles que l'identité temporaire du mobile (pour limiter la fraude liée à l'interception et à l'utilisation frauduleuse de l'IMSI) ou la zone de localisation (LA) courante de l'abonné. 

      II.2.2.3 Le groupe des éléments du domaine PS
* Le SGSN (Serving GPRS Support Node).
* Le GGSN (Gateway GPRS Support Node).

   II.2.3 Le réseau d'accès UTRAN
   La figure suivante illustre les éléments du réseau d'accès :

Réseau d'accès UTRAN
   II.2.3.1 Les différents constituants
* Le NodeB : son rôle principal est d'assurer les fonctions de réception et de transmission radio pour une ou plusieurs cellules de l'UTRAN.
* Le RNC (Radio Network Controller) : son rôle principal est le routage des communications entre le NodeB et le réseau coeur.


RNC et NodeB

      Lorsqu'un mobile est en communication (cf figure ci-dessus), une connexion RRC (Radio Resource Control) est établie entre le mobile et un RNC de l'UTRAN. Le RNC en charge de cette connexion est appelé SRNC (Serving RNC). Lorsque l'usager se déplace dans le réseau, il peut être conduit à changer de cellule en cours de communication, et peut même se retrouver dans une cellule faisant partie d'un NodeB ne dépendant plus de son SRNC. On appelle alors Controlling RNC, le RNC en charge de ces cellules distantes. D'un point de vue RRC, le RNC distant est appelé drift RNC. Les données échangées entre le serving RNC et le mobile transitent par les interfaces Iur et Iub. Le drift RNC joue donc le rôle de simple routeur vis à vis de ces données. 
      II.2.3.2 L'interface radio de l'UTRAN
      II.2.3.2.1 L'architecture en couches
      Les protocoles de l'interface radio s'appliquent aux 3 premières couches du modèle OSI (Open Systems Interconnections), qui sont la couche physique, la couche liaison de données, et la couche réseau (routage).

Vue en couche de l'interface radio de l'UTRAN
* Le niveau 1 (PHY) représente la couche physique de l'interface radio. Elle réalise entre autre les fonctions de codage de canal, d'entrelacement et de modulation.
* Le niveau 2 comprend les couches PDCP, RLC, MAC et BMC. 
* Le transport fiable des données entre 2 équipements est assuré par la couche RLC (Radio Link Control). Le protocol RLC ressemble beaucoup aux protocoles tels que HDLC et LAPD.
* La couche MAC (Medium Access Control) remplit la fonction de multiplexage des données sur les canaux de transport radio.
* La couche PDCP (Packet Data Convergence Protocol) a deux fonctions principales. Tout d'abord elle permet d'assurer l'indépendance des protocoles radio de l'UTRAN (couches MAC et RLC) par rapport aux couches de transport réseau. Cette indépendance permettra de faire évoluer les protocoles réseau (par exemple de passer de l'IPv4 à l'IPv6) sans modification des protocoles radio de l'UTRAN. D'autre part, la couche PDCP offre les algorithmes de compression de données ou d'en-tête de paquets de données, permettant un usage plus efficace des ressources radio. 
* La couche BMC (Broadcast/Multicast Control) assure les fonctions de diffusion de messages sur l'interface radio.
* Le niveau 3 de l'interface radio contient la couche RRC (Radio Resource Control). La fonction principale de cette couche est la gestion de la connexion de signalisation établie entre l'UTRAN et le mobile. Cette connexion est utilisée lors des échanges de signalisation entre le mobile et l'UTRAN, par exemple, à l'établissement et à la libération de la communication.

Encapsulation des paquets arrivant du réseau coeur
      II.2.3.2.2 Cas d'un paquet IP
      Le paquet d'information reçu par l'UTRAN et provenant du réseau coeur est la N-PDU (Network PDU). Dans le cas d'un paquet IP, l'en-tête de la N-PDU est compressé par la couche PDCP, c'est à dire remplacé par un en-tête PDCP de taille plus réduite. Cette nouvelle PDU est ensuite segmentée par la couche RLC, qui ajoute à chaque segment son propre en-tête. La RLC-PDU est alors traitée par la couche MAC, qui ajoute un en-tête lorsqu'un multiplexage est effectué.
      
      II.2.3.2.3 Cas du transport de la voix
      Pour la voix, le fonctionnement est beaucoup plus simple. Les couches RLC et MAC sont utilisées en mode transparent (ni segmentation, ni multiplexage des trames de phonie) ; la couche PDCP est dans ce cas inutile.
      
II.2.3.2.4 Protocoles réseaux
      Nous avons décrit l'interface radio de l'UTRAN et les protocoles associés. Mais l'UTRAN ne se limite pas à l'interface radio. En raison des nombreux noeuds réseau définis dans l'UTRAN (NodeB et RNC), un ensemble de protocoles et d'interfaces appartenant à la partie terrestre a été défini pour permettre à ces différents noeuds d'échanger de la signalisation et des données usager. 

      Notons que l'interface radio (aussi nommée interface air) de l'UMTS est basée sur le WCDMA (Wideband Code Distributed Multiple Access), qui elle-même réutilise largement le concept CDMA.

      II.2.4 UMTS Handover
      II.2.4.1 Introduction 
      L'infrastructure fixe des réseaux de mobilophone inclut les stations de base distribuées dans toute la surface couverte du réseau, qui offrent la connectivité par l'intermédiaire de l'interface d'air aux mobilophones dans leur secteur d'assurance. Tant qu'il est active (par exemple, pendant un appel) un mobile utilise un canal radio fourni par sa station de base et parfois il devient nécessaire ou souhaitable de changer le canal assigné ou plus souvent la station de base, le procédé par lequel ceci se produit se nomme Handover.

      Dans des réseaux UMTS, les canaux utilisés par des mobiles peuvent être soutenus par l'intermédiaire des stations de base multiples simultanément par le "Soft handover" et ainsi la simple décision de handover (cas du GSM) est remplacée par des décisions pour créer la(les) connexion(s) à la(aux) nouvelle(s) station(s) de base et pour enlever la(les) connexion(s) existante(s). L'échec d'ajouter des connexions aux stations de base voisines, augmente le niveau de l'interférence éprouvé en cellules voisines et peut avoir d'impact sur la capacité de maintenir la qualité de l'appel, tout en inutilement ajoutant des rendements de connexions qui améliorent un peu la qualité mais consomme la capacité de la cellule voisine. UMTS Handover reste encore "mobile assisted" et "Network Controlled" (c-à-d  le mobile produit des rapports de mesure, détaillant sa perception, la puissance et la qualité du canal courant et la puissance des cellules voisines, mais il est contrôlé par le réseau car c'est ce dernier qui prend la décision réelle, tout en utilisant les rapports du mobile et les mesures semblables qu'il fait).

II.2.4.2 Les catégories du Handover
   Les catégories du Handover (également désigné sous le nom du handoff) sont les suivantes :

* Hard Handover : Il signifie que tous les anciens liens radio dans l'UE sont enlevés avant que les nouveaux liens radio soient établis. 
Hard Handover peut être sans couture (seamless) ou avec couture (non-seamless). Le Hard Handover sans couture signifie que le handover n'est pas perceptible à l'utilisateur.  Dans la pratique un handover qui exige un changement de la fréquence porteuse (handover d'inter-fréquence) est toujours exécuté en tant que hard handover.

* Soft Handove : Il signifie que les liens radio sont ajoutés et enlevés d'une manière que l'UE garde toujours au moins un lien radio à l'UTRAN. Le Soft handover est exécuté au moyen de macro diversité, qui se rapporte à la condition que plusieurs liens radio sont en activité en même temps.  Le Soft handover peut être employé quand des cellules utilisant  la même fréquence sont changées.

* Softer handover : Il est un cas spécial de Soft handover où les liens radio qui sont ajoutés et enlevés appartiennent au même NodeB.
 
   D'une façon générale nous pouvons distinguer le handover d'intra-cellule et le handover d'inter-cellule. Pour UMTS les types suivants de handover sont indiqués:

* Handover 3G -3G (entre UMTS et autres systèmes 3G) 
* FDD soft/softer handover 
* FDD inter-frequency hard handover 
* FDD/TDD Handover (changement de cellule) 
* TDD/FDD Handover (changement de cellule) 
* TDD/TDD handover 
* Handover 3G - 2G (e.g. handover vers GSM) 
* Handover 2G - 3G (e.g. handover depuis GSM)

   La cause la plus évidente pour exécuter un handover est celle ci, dû à son mouvement, un utilisateur peut être servi en une autre cellule plus efficacement (comme moins d'émission de puissance, moins d'interférence).  Il peut cependant également être exécuté pour d'autres raisons telles que la commande de charge de système.

   L'ensemble actif (Active Set) est défini comme étant l'ensemble de Node-Bs dont l'UE est simultanément relié (c-à-d, les cellules d'UTRA assignant actuellement un downlink DPCH à l'UE constituent l'ensemble actif).

   Des cellules, qui ne sont pas incluses dans l'ensemble actif, mais sont incluses dans le CELL_INFO_LIST appartiennent à Monitored Set.

   Les cellules détectées par les UE, qui ne sont ni dans le CELL_INFO_LIST ni dans l'ensemble actif appartiennent au Detected Set. Le reportage des mesures de l'ensemble détecté est seulement applicable aux mesures d'intra-fréquence faites par UEs dans l'état de CELL_DCH.

   II.2.4.3 Les Différents types de mesures d'interface d'air 
* Mesures d'Intra-fréquence : mesures sur les canaux physiques de downlink à la même fréquence que l'ensemble actif.  Un objet de mesure correspond à une cellule.

* Mesures d'Inter-fréquence : mesures sur les canaux physiques de downlink aux fréquences différentes de la fréquence de l'ensemble actif.  Un objet de mesure correspond à une cellule.

* Mesures d'Inter-RAT : mesures sur les canaux physiques de downlink appartenant à une autre technologie d'accès radio qu'UTRAN, par exemple GSM.  Un objet de mesure correspond à une cellule.

* Mesures du volume de trafic :  mesures sur le volume de trafic d'uplink. Un objet de mesure correspond à une cellule.

* Mesures de qualité : mesures des paramètres de qualité de downlink, par exemple taux d'erreur de bloc de transport de downlink. Un objet de mesure correspond à un canal de transport en cas de BLER. Un objet de mesure correspond à un timeslot en cas de SIR (TDD seulement).

* Mesures d'UE-internal : mesures de la puissance de transmission d'UE et du  niveau de signal reçu par l'UE.

* Mesures de positionnement d'UE :  Mesures de la position d'UE.

L'UE supporte un certain nombre de mesures fonctionnant en parallèle. L'UE supporte également que chaque mesure soit commandée et rapportée indépendamment de toute autre mesure.

      II.2.4.4 L'optimisation de Handover 
      Visant à optimiser le handover seulement d'une perspective d'utilisateur exige de maintenir la connexion de la plus haute qualité à tout moment, aussi bien que d'assurer une probabilité acceptable que la  qualité demeurera haute.  Ceci exige d'augmenter le nombre de handovers pour s'assurer que le mobile reste sur la meilleure cellule à tout moment, tout en diminuant le nombre de handovers inutiles pour réduire au minimum les brèves interruptions et la chance d'échec qui sont associés à chaque handover.  Cependant, l'optimisation de la perspective de réseau, exige de maintenir la qualité appropriée de tous les appels, tout en soutenant autant d'appels que possible. 

      A la fin de ce chapitre, nous pouvons dire que les normes de grande couverture sont décrites, passons alors à la description des normes de couverture locale et commençons par l'IEEE802.11 qui fera l'objet du chapitre suivant.
      

CHAPITRE III         La norme IEEE 802.11

      Introduction
      La norme IEEE 802.11 (ISO/IEC 8802-11) est un standard international décrivant les caractéristiques d'un réseau local sans fil (WLAN), ce dernier est utilisé pour remplacer les réseaux LANs ou comme prolongation de l'infrastructure des LANs.
      
      Les réseaux sans fils doivent effectuer un compromis entre la portée et le débit disponibles. Différentes évolutions sont en cours aussi bien pour permettre des extensions pour la sécurité, la qualité de service et le handover que pour améliorer le débit, la couverture et permettre les réseaux ad-hoc et la cohabitation avec les autres types de réseau. 
      III.1 Architecture du réseau 802.11
      Un LAN 802.11 est basé sur une architecture cellulaire où le système est divisé en des cellules dont chacune (appelée Basic Service Set ou BSS, dans la nomenclature 802.11) est contrôlée par une station de base (appelée Access Point ou AP).
      Un ensemble de service de base (BSS) se compose de deux noeuds sans fil ou plus, ou des stations (STAs), qui se sont identifiées et ont établi des communications.  Sous la forme la plus fondamentale, les stations communiquent directement l'un avec l'autre à un niveau de peer-to-peer partageant un secteur donné de cellules.
      Ce type de réseau est souvent formé sur une base provisoire, et désigné généralement sous le nom d'un réseau ad-hoc, ou Independent Basic Service Set (IBSS).
      Dans la plupart des exemples, le BSS contient un point d'accès (AP).   La fonction principale de AP est de former un pont entre les WLANs et les LANs. AP est analogue à une station de base utilisée dans les réseaux téléphoniques cellulaires.  Quand AP est présent, les stations ne communiquent pas d'une façon peer-to-peer. Toutes les communications entre les stations ou entre une station et un client du réseau câblé passent par AP. APs ne sont pas mobiles, et ils font partie de l'infrastructure du réseau câblé. Un BSS dans cette configuration serait fonctionnant en mode d'infrastructure.
      Quoiqu'un LAN sans fil puisse être constitué par une seule cellule, avec un seul point d'accès, (et peut également travailler sans point d'accès), la plupart des installations seront constituées par plusieurs cellules, où les points d'accès sont reliés ensemble par un certain genre de Backbone (appelée système de distribution ou DS), typiquement d'Ethernet, et dans certain cas le wireless lui-même.
      Le réseau Wireless LAN tout entier, comprenant les différentes cellules, leurs points d'accès respectifs et le système de distribution, est vu aux couches supérieures du modèle OSI, comme un réseau 802 simple, et s'appelle dans la norme Extended Services Set  (ESS). Les noeuds mobiles peuvent errer (roam) entre les APs et il est alors possible d'avoir une couverture sans coupure.
      IEEE 802.11 supporte alors 2 modes de configuration, le mode peer-to-peer et le mode configuration.
      La figure suivante montre un réseau 802.11 LAN, avec les composants déjà décrits :












      La norme définit également le concept d'un Portail, un Portail est un dispositif qui relie entre un LAN 802.11 et un autre LAN 802. Ce concept est une description abstraite d'une partie de la fonctionnalité d'un «translation bridge»



Equipements : cartes 802.11

Equipements : Point d'accès


Equipements : Antenne

      III.2 Modèle en couche
      La norme 802.11 s'attache à définir les couches basses du modèle OSI pour une liaison sans fil utilisant des ondes électromagnétiques, c'est-à-dire : 
> La couche physique (notée parfois couche PHY), proposant trois types de codage de l'information :
* Frequency Hopping Spread Spectrum (FHSS) dans la bande 2.4 Ghz;
* Direct Sequence Spread Spectrum (DSSS) dans la bande 2.4 Ghz et 
* InfraRed
> La couche liaison de données, constitué de deux sous-couches : le contrôle de la liaison logique (Logical Link Control, ou LLC) et le contrôle d'accès au support (Media Access Control, ou MAC).
   La couche MAC 802.11 est responsable en plus des fonctions standards remplies par les couches MAC, des fonctions qui sont typiquement relatives aux couches supérieures, comme la Fragmentation, la retransmission des paquets et l'Acknowledges.
   III.3 Architecture protocolaire du IEEE802.11
* L'entité MAC 
* mécanisme d'accès de base 
* fragmentation
* chiffrage 
* l'entité MAC Layer Management
* synchronization
* gestion de puissance 
* roaming
* MAC MIB
* Physical Layer Convergence Protocol (PLCP)
* Physical Medium Dependent Sublayer (PMD)
* modulation et codage
* PHY Layer Management
* canal accordant (channel tuning)
* PHY MIB
* Station Management
* interagit avec MAC Management et PHY Management



IEEE 802.11 Standard 

      III.4 l'architecture de base du WLAN IEEE 802.11
      
 



      
      III.5 La technologie Radio 
      La Réglementation de la bande ISM est donnée par le tableau suivant



      FHSS et DSSS PHYs soutiennent actuellement 1 et 2 Mbps.  Cependant, chacune des 11 Mbps radio sont DSSS. Les principes de fonctionnement de DSSS sont décrits dans ce qui suit.

Modulation Numérique de la donnée avec une séquence PRN

      Les systèmes de DSSS emploient une technologie semblable aux satellites de GPS et à quelques types de téléphones mobiles. Chaque bit d'information est combiné par l'intermédiaire d'une fonction de XOR avec une longue séquence Pseudo-random Numerical (PN) comme représenté sur la figure précédente. Le résultat est un jet numérique (digital stream) à grande vitesse qui est alors modulé sur une fréquence porteuse en utilisant Differential Phase Shift Keying (DPSK).


Filtre assorti Corrélateur utilisé pour la réception du signal de
DSSS
      En recevant le signal de DSSS, un corrélateur assorti de filtre est employé comme représenté sur le schéma précédent. Le corrélateur enlève la séquence de PN et récupère le flux de données original.  Pour les débits plus élevés de 5,5 et 11 Mbps, les récepteurs de DSSS utilisent différents codes de PN et une banque des corrélateurs pour récupérer le flux de données transmis. La méthode de modulation de taux élevé s'appelle Complimentary Code Keying (Cck). Les effets d'employer des codes de PN pour produire le signal de spectre de diffusion (spread spectrum signal) sont montrés sur le schéma suivant.

Figure a Effet de la séquence PN sur le spectre transmis

Figure b Le signal reçu est corrélé avec PN pour retrouver la donnée et enlever l'interférence

      Comme représenté sur la figure a, la séquence PN écarte la largeur de bande transmise du signal résultant (d'où l'utilisation du nom spread spectrum) et réduit la puissance maximale. Cependant, il faut noter que la puissance totale est inchangée.  Sur la réception, le signal est corrélé avec la même séquence PN pour rejeter l'interférence à bande étroite et récupérer les données binaires originales (fig. b). Indépendamment du débit que se soit 1, 2, 5.5 ou 11 Mbps, la largeur de bande de canal est environ 20 MHz pour les systèmes DSSS. Par conséquent, la bande d'ISM adaptera jusqu'à trois canaux non-recouverts.


3 cannaux DSSS non-recouverts dans la bande ISM

      III.6 Accès Multiple
      La méthode d'accès de base pour 802.11 est la fonction distribuée de coordination (DCF Distributed Coordination Function) qui emploie Carrier Sense Multiple Access / Collision Avoidance (CSMA / CA).  Ceci exige de chaque station d'entendre les autres utilisateurs du canal.  Si le canal est libre, la station peut transmettre, si non, c.à.d il est occupé, chaque station doit attendre jusqu'à ce que la transmission s'arrête, et entre alors dans la procédure dite random back off, c.à.d elle diffère son accès d'une façon aléatoire. Ceci empêche les stations multiples de saisir le médium juste après l'accomplissement de la transmission précédente.


L'Algorithme Back-off de CSMA/CD

      La réception de paquet dans DCF exige un acquittement comme représenté sur la figure précédente. La période entre l'accomplissement de la transmission de paquet et le début de la trame d'ACK est appelée Short Inter Frame Space (SIFS). Notons que Les trames d'ACK ont une priorité plus élevée que tout autre trafic. L'acquittement rapide est l'un des caractéristiques saillantes de la norme 802.11, parce qu'il exige d'ACKS d'être manipulés à la sous-couche MAC.

      Les transmissions autres que les ACKs doivent attendre au moins un DCF Inter Frame Space (DIFS) avant de transmettre des données.  Si un émetteur trouve que le médium est occupé, il détermine une période back-off aléatoire en plaçant un temporisateur interne à un nombre entier de temps de slots suivant la formule suivante : TBACKOFF = random (0, CW) x Timeslot, où CW est la fenêtre de contention.  Sur l'expiration d'un DIFS, le temporisateur commence à se décrémenter. S'il atteint zéro, la station peut commencer la transmission.  Cependant, si le canal est saisi par une autre station avant que le temporisateur atteint zéro, le temporisateur sera maintenu à la valeur décrémentée pour la transmission suivante. 

      La méthode décrite ci-dessus se fonde sur le sens physique de porteur (Physical Carrier Sense).  La prétention fondamentale est que chaque station peut «entendre» toutes autres stations. Mais, ce n'est pas toujours le cas.  En référence à la figure suivante, AP est dans la marge de la STA-A, mais la STA-B ne l'est pas.  La STA-B ne pourrait pas détecter des transmissions de STA-A, et la probabilité de la collision est considérablement augmentée.  Ceci est connu comme noeud caché (Hidden Node). 


La procédure RTS/CTS élimine le problème de «Hidden Node»

      Pour résoudre ce problème, un deuxième mécanisme de carrier sense est disponible. Virtual Carrier Sense permet à une station de réserver le médium pendant une période indiquée par l'utilisation des trames RTS/CTS.  Dans le cas décrit ci-dessus, STA-A envoie une trame RTS à AP.  Le RTS ne sera pas entendu par STA-B.  	La trame RTS contient un champ de duration/ID qui indique la période pendant laquelle le médium est réservé pour une transmission suivante.  L'information de réservation est stockée dans le vecteur d'attribution de réseau (NAV Network Allocation Vector) de toutes les stations détectant la trame RTS.

      A la réception du RTS, AP répond avec une trame CTS, qui contient également un champ de duration/ID indiquant la période pendant laquelle le médium est réservé. Malgré que la STA-B ne détecte pas le RTS, elle détectera la trame CTS et mettra à jour son NAV en conséquence. Ainsi, la collision est évitée quoique quelques noeuds soient cachés d'autres stations.  Le procédé de RTS/CTS est demandé suite à un paramètre indiqué par l'utilisateur. Il peut être employé toujours, jamais ou pour les paquets qui excèdent une longueur arbitrairement définie.  

      Comme mentionné ci-dessus, DCF est la méthode de base de contrôle d'accès de médias pour 802.11 et elle est obligatoire pour toutes les stations. La fonction de coordination de point (PCF Point Coordination Function) est une prolongation facultative à DCF, c'est une méthode d'accès sans collision. PCF fournit des possibilités de duplexage de division de temps pour adapter au temps lié, des services orienté connexion tels que la téléphonie sans fil, elle permet le transfert de données isochrones, elle est une méthode d'accès basée sur le polling, son inconvénient est qu'elle n'est jamais implémentée au niveau des points d'accès.

      III.7 L'adressage Logique 
      Les auteurs de la norme 802.11 ont tenu compte de la possibilité que les médias sans fil, le système de distribution, et l'infrastructure de câble LAN emploieraient tous différentes espaces d'adresses. IEEE 802.11 indique seulement l'adressage pour le milieu sans fil, bien qu'on l'ait prévu spécifiquement pour faciliter l'intégration avec l'Ethernet de câble LANs IEEE 802.3.  Le système d'adressage d'IEEE802 48-bit a été donc adopté pour 802.11, maintenant de ce fait la compatibilité d'adresse avec la famille entière des normes d'IEEE 802.  Dans la grande majorité d'installations, le système de distribution est un LAN de câble IEEE 802 et chacune des trois espaces adresses logiques est identique.

III.8 La sécurité 
      IEEE 802.11 prévoit la sécurité par l'intermédiaire de deux méthodes : authentification et chiffrage (encryption). L'authentification est le moyen par lequel une station est vérifiée pour avoir l'autorisation de communiquer avec une deuxième station dans une surface de couverture donnée. Dans le mode d'infrastructure, l'authentification est établie entre AP et chaque station. 

      L'authentification peut être système ouvert (Open System) ou clef partagée (Shared Key). Dans un système ouvert, n'importe quelle STA peut demander l'authentification. La STA recevant la demande peut accorder l'authentification à n'importe quelle demande, ou seulement à ceux des stations sur une liste définie pour l'utilisateur.  Dans un système à clef partagée, seulement des stations qui possèdent une clef chiffrée secrète peuvent être authentifiées. L'authentification à clef partagée est disponible seulement aux systèmes ayant les possibilités facultatives de chiffrage. 

      Le chiffrage est prévu pour fournir un niveau de sécurité comparable à celui d'un LAN câblé. Le WEP Wired Equivalent Privacy emploie l'algorithme de RC4 PRNG de la sécurité de données de RSA.  L'algorithme de WEP a été choisi pour répondre aux critères suivants :

> Raisonnablement fort
> Self-synchronizing
> Efficacité informatique
> Exportable
> Optionel 

   III.9 La synchronisation et la gestion de puissance
   
   Toutes les horloges de station dans un BSS sont synchronisées par la transmission périodique des balises embouties par temps. En mode d'infrastructure, AP sert de maître de synchronisation (timing master) et produit toutes les balises de synchronisation.  La synchronisation est maintenue dans un délai de 4 micro-secondes plus le retard de propagation. 

   La synchronisation balise joue également un rôle important dans la gestion de puissance. Il y a deux modes d'économie de puissance définis : se réveiller (awake) et somnoler (doze). En mode awake, les stations sont entièrement actionnées et peuvent recevoir des paquets à tout moment.  Les noeuds doivent informer l'AP avant d'entrer dans le mode doze. En ce mode, Le point d'accès réveille périodiquement les stations en mode veille pour entendre les balises qui indiquent que l'AP a des messages en attente.

   III.10 Roaming
   La norme identifie les formats de base de message pour soutenir le roaming, mais toute autre chose est laissée aux fournisseurs de réseau (Network vendors). Afin de remplir le vide, l' Inter-Access Point Protocol (IAPP) a été conjointement développé par Aironet, Lucent Technologies, et Digital Ocean.  Entre autres, IAPP prolonge l'inter-opérabilité entre plusieurs fournisseurs au roaming. Il adresse le roaming dans un seul ESS  et entre deux ESSs ou plus.

   III.11 L'alliance sans fil de compatibilité d'Ethernet (The Wireless Ethernet Compatibility Alliance)
   Le Complimentary Code Keying (CCK) récemment adopté fournit des vitesses de 5,5 et de 11 Mbps dans la même largeur de bande occupée par la génération courante des radios DSSS de 1 et 2 Mbps et sera compatible entièrement en arrière. 
   La mission du Wireless Ethernet Compatibility Alliance est de fournir la certification de la conformité avec l'IEEE 802.11 et de s'assurer que les produits des multiples fournisseurs répondent à des conditions strictes pour l'interopérabilité.

   III.12 Etalonnage du Wireless LAN [7]



      III.13 Wi-Fi (Wireless Fidelity)
      Grâce au Wi-Fi, il est possible de créer des réseaux locaux sans fil à haut débit pour peu que la station à connecter ne soit pas trop distante par rapport au point d'accès. Dans la pratique le Wi-Fi permet de relier des ordinateurs portables, des machines de bureau, des assistants personnels (PDA) ou même des périphériques à une liaison haut débit (11 Mbps) sur un rayon de plusieurs dizaines de mètres en intérieur (généralement entre une vingtaine et une cinquantaine de mètres). Dans un environnement ouvert la portée peut atteindre plusieurs centaines de mètres. 
      III.13.1 Les différentes normes WiFi
      802.11a (Wifi5) : La norme 802.11a spécifie 8 canaux radio dans la bande de fréquence des 5,2 GHz.
   Informations techniques :
> Fréquence : plage des 5,2 GHz ;
> Largeur de bande : 300Mhz ;
> Débit théorique maximal de 54 Mbps, 30 Mbps réels ;
> Portée maximale : entre 25 et 50 mètres.
      
      Cette norme opère dans une bande de fréquences moins encombrée que celle des 2,4 GHz commune à ISM et aux normes IEEE 802.11b, Bluetooth et HomeRF. Elle offre ainsi une meilleure résistance aux interférences. Avec des débits élevés et des interférences relativement faibles, 802.11a paraît la meilleure pour supporter les applications multimédia et les environnements peuplés en utilisateurs. Si la vitesse théorique maximum est bien supérieure à 802.11b, il semblerait que les débits offerts par IEEE 802.11a se réduisent plus rapidement avec la distance.
      802.11b (wifi) : La norme 802.11b est la norme la plus répandue actuellement. Elle propose un débit théorique de 11 Mbps (6 Mbps réels) avec une portée pouvant aller jusqu'à 300 mètres dans un environnement dégagé. La plage de fréquence utilisée est la bande des 2.4 GHz, avec 3 canaux radio disponibles. 802.11b utilise CCK (Complementary Code Keying), qui est une technique de modulation qui rende l'utilisation du spectre de fréquence efficace.
      802.11c (Pontage 802.11 vers 802.1d) : La norme 802.11c n'a pas d'intérêt pour le grand public. Il s'agit uniquement d'une modification de la norme 802.1d afin de pouvoir établir un pont avec les trames 802.11 (niveau liaison de données). Notons que Les développeurs de produit utilisent cette norme en développant des points d'accès.
      802.11d (Internationalisation) : La norme 802.11d est un supplément à la norme 802.11 dont le but est de permettre une utilisation internationale des réseaux locaux 802.11. Elle consiste à permettre aux différents équipements d'échanger des informations sur les plages de fréquence et les puissances autorisées dans le pays d'origine du matériel.
      802.11e (Amélioration de la qualité de service) : La norme 802.11e vise à donner des possibilités en matière de qualité de service au niveau de la couche liaison de données (MAC). Cette norme fournit des classes de services, améliore les mécanismes de sécurité et d'authentification. Ainsi cette norme a pour but de définir les besoins des différents paquets en terme de bande passante et de délai de transmission de telle manière à permettre notamment une meilleure transmission de la voix et de la vidéo.
      802.11f (Itinérance (roaming)) : La norme 802.11f est une recommandation à l'intention des vendeurs de points d'accès (AP) pour une meilleure interopérabilité des produits. Elle propose le protocole Inter-Access point roaming protocol IAPP permettant à un utilisateur itinérant de changer de point d'accès de façon transparente lors d'un déplacement, quelles que soient les marques des points d'accès présentes dans l'infrastructure réseau.
      En absence de 802.11f, il sera obligatoire d'utiliser le même fournisseur de points d'accès pour assurer l'interopérabilité pour les utilisateurs en roaming. Dans certains cas un mélange de fournisseurs de points d'accès marche, particulièrement si les points d'accès sont Wi-Fi-certified. L'inclusion de 802.11f dans la conception de point d'accèse ouvrira les options et ajoutera une certaine assurance d'interopérabilité en choisissant des fournisseurs de points d'accès. 
      802.11g : 
   Informations techniques :
> Fréquence : plage des 2.4 GHz (identique à la norme IEEE 802.11b) ;
> Débit théorique maximal de 54 Mbps, 30 Mbps réels ;
> Portée maximale : 50 mètres ;
> Utilise la modulation OFDM (Orthogonal Frequency Division Multiplexing).
      Malgré que 802.11g emploie la modulation OFDM, des dispositions impératives ont été faites dans la norme pour la rendre compatible avec la norme bien établie 802.11b à 11 Mbits/s, qui emploie la modulation complementary code keying (CCK), ce qui signifie que des matériels conformes à la norme 802.11g pourront fonctionner en 802.11b.

      IEEE 802.11g offre une vitesse équivalente à la norme IEEE 802.11a tout en restant dans la bande de fréquence ISM (2,4 GHz). 

      802.11h : La norme 802.11h vise à rapprocher la norme 802.11 du standard européen (HiperLAN 2, d'où le h de 802.11h) et être en conformité avec la réglementation européenne en matière de fréquence et d'économie d'énergie. 
802.11h s'occupe notamment de l'assignation automatique de fréquences de l'AP et du contrôle automatique de la puissance d'émission, visant à éliminer les interférences entre points d'accès (à ne pas confondre avec un asservissement de la puissance d'émission de l'AP en fonction de la force du signal du client, tel que c'est le cas pour le MMAC).
      Les mécanismes utilisés sont DFS et TPC :
   DFC (Dynamic Frequency Selection)
* Les APs prennent la décision 
* Les STAs fournissent des rapports détaillés au sujet d'utilisation de spectre à leurs endroits.
      TPC (Transmission power control) soutient la minimisation d'interférence, la réduction de puissance d'énergie, la commande de gamme et la robustesse de lien. 
Les procédures de TPC incluent :
* Les APs définissent et communiquent des contraintes standards et normales de puissance à transmettre.
* Les stations choisissent les puissances à transmettre de chaque trame selon les contraintes standards et locales.

      802.11i : La norme 802.11i a pour but d'améliorer la sécurité des transmissions (gestion et distribution des clés, chiffrement et authentification). Elle résoud les problèmes de sécurité liés au protocole WEP. Cette norme s'appuie sur l'AES (Advanced Encryption Standard) et propose un chiffrement des communications pour les transmissions utilisant les technologies 802.11a, 802.11b et 802.11g.



      802.1x : Sous-section du groupe de travail 802.11i visant à l'intégration du protocole EAP (authentification) dans les trames Ethernet (indépendamment de tout protocole PPP, contrairement aux accès RAS conventionnels). 1x permet l'usage d'un serveur d'authentification de type Radius

      802.11IR : La norme 802.11IR a été élaborée de telle manière à utiliser des signaux infra-rouges. Cette norme est désormais dépassée techniquement.
      802.11j : La norme 802.11j est à la réglementation japonaise ce que le 802.11h est à la réglementation européenne.
      Les avantages  des réseaux sans fil de type Wi-Fi sont :
> Ils fonctionnent sur des bandes de fréquence ne nécessitant pas de licence - 2,4GHz et 5GHz (contrairement à l'UMTS par exemple)
> Ils permettent le nomadisme (Terminal utilisé sans déplacement) et la mobilité (bien que la vitesse maximale de déplacement d'un terminal dans un réseau Wi-Fi est plutôt proche de celle d'un piéton) 
> L'installation est facile et la topologie est dynamique. Cela permet la mise en place rapide d'un nouveau réseau (par exemple pour un événement) 
> Le coût est faible (près de 100 fois moins cher qu'une antenne UMTS à portée équivalente) 
      Les inconvénients des réseaux sans fil de type Wi-Fi sont :
> Le réseau n'est pas optimisé contrairement à l'UMTS (ce qui nécessite de faire de la surcapacité en réseau sans fil) 
> Il y a des problèmes liés à la propagation des ondes, 
> la réglementation n'est pas encore figée (tout particulièrement sur la nouvelle bande des 5 GHz) 
> les effets sur la santé sont encore mal connus 
> la sécurité est encore mal gérée 
> La consommation électrique est importante 
      Certains de ces avantages et inconvénients sont inhérents aux réseaux sans fils en général, d'autres permettent de les distinguer d'autres technologies comme celles des mobiles 3G de type UMTS.
      Ayant fait une étude rapide des différents descendents de la norme IEEE 802.11, nous allons nous arrêter un peu plus avec la norme IEEE 802.11f qui s'occupe du roaming inter-technologies et par suite elle est au coeur de notre sujet d'étude.
      Le protocole utilisé dans cette norme est l'IAPP, détaillons alors ce dernier.
      
      III.14 IAPP Inter-Access Point Protocol [3]
      Le protocole de point d'Inter-Accès d'IEEE 802.11f (IAPP) soutient l'interopérabilité de fournisseur de point d'accès, permettant le roaming  des stations 802.11 dans des IP subnets.
      IAPP définit des messages et des données à échanger entre les points d'accès et entre l'IAPP ainsi que les entités de gestion des couches supérieures pour  supporter le roaming. Le protocole IAPP utilise le TCP pour la communication entre les points d'accès (for inter-Access Point communication) et le UDP pour les échanges du type RADIUS request/response. Il emploie également des trames de la couche 2 pour mettre à jour les tables d'expédition des dispositifs de la couche 2. 

      Une fois, une station en roaming entre dans la surface de couverture du nouveau point d'accès (AP), elle lancera le handover à cet AP. Ceci déclenche l'AP pour employer l'IAPP pour rechercher l'information appropriée de la station du serveur RADIUS, pour informer l'ancien AP de la nouvelle association et pour exécuter un transfert de contexte avec cet ancien AP. Ce transfert de contexte assure le handover rapide et sans couture au nouveau AP. 

   Le but principal de ce protocole est :
1- Assurer la mise à jour rapide des tables de pont (bridge tables) pour ne pas perdre le trafic qui est dirigé vers une station mobile.
2- Partager des données d'authentification concernant la station mobile pour permettre une re-authentification rapide. 
3- Passer des informations sur l'identité des autres APs dans le même réseau, pour être employé dans des outils diagnostiques.

      III.14.1 La relation entre IAPP et IEEE 802.11
      Comme le diagramme ci-dessous l'illustre, l'échange d'IAPP est exécuté entre l'APs et cela par l'intermédiaire du système de distribution (par exemple l'infrastructure câblée par laquelle les Aps sont reliés). 
Quand une STA roams, et se déplace d'un AP à un autre, une réassociation à un "nouveau" AP est exécutée pour s'assurer que la STA maintient la connexion au réseau. De cette manière le "nouveau" AP saura l'arrivée de la STA. 

      L'ancien AP (à partir duquel la STA parte) doit être informé au sujet de cet événement, de sorte qu'il ne passe pas le trafic à la STA.
L'ancien AP peut être informé de deux manières différentes : 
      1. Passive : La STA lance le trafic qui est reçu par l'ancien AP sur un port différent (le port d'Ethernet par exemple), qu'où l'ancien AP l'a attendu (c.-à-d. le port sans fil). En conséquence l'ancien AP mettra à jour ses tables de pont. 
      2. Active (par protocole) : le nouveau AP informera l'ancien AP que la STA est réassociée. 

   Les avantages d'une méthode active tels qu'IAPP sont : 
* Aucun retard de mis à jour des tables de pont,
* Aucun trafic perdu quand les données étaient sur son chemin à la STA tandis qu'elles éloignaient de AP, 
* Aucun compte sur la STA pour publier le trafic afin de mettre à jour les tables, 
* Les possibilités pour diffuser l'information additionnelle entre AP. 




   Trois grandes exigences ont rendu IAPP nécessaires :
* IEEE802.11 ne supporte pas le handover. 
* IEEE802.11 ne support pas l'AP coordination. 
* IEEE802.11 n'a exposé l'interface au system de distribution. 
      
      III.14.2 Définition du protocole IAPP
      Deux protocoles de base sont définis dans IAPP, ce sont :
* Announce Protocol : Ceci assure que l'AP sait les autres APs dans son réseau.
* Handover Protocol : Ceci assure que les APs sont activement informés au sujet de l'événement du roaming d'une station mobile. 
      Ces deux éléments de protocole sont échangés entre les APs en utilisant le trafic d'UDP/IP.  En d'autres termes ces éléments exigent la connaissance de l'adresse IP de l'APs.

      III.14.2.1 IAPP Announce Protocol
      Deux messages Announce AP sont définis, ce sont :
* ANNOUNCE. request. 
* ANNOUNCE. response. 

      Déroulement du protocole 
      Quand un AP se met à travailler, il transmettra un "Announce request", indiquant qu'il commence à travailler et demandant les autres APs pour se faire connaître. Ce message est envoyé à une adresse de destination d'IP Multicast en utilisant l'adressage de groupe défini d'UDP/IP.  
      D'autres APs qui font partie du même réseau et sont déjà opérationnells répondent avec un "Announce response". La réponse portera l'information (adresse IP de l'expéditeur en tant qu'élément de l'en-tête, et le BSSID de l'AP en tant qu'élément de la charge utile), celle ci est employée par le nouveau AP pour construire une table de conversion de BSSID-to-IP.  La table est employée par le nouveau AP pour relier le BSSID, (employée par la station en état de roaming pour identifier son ancien AP) à l'adresse d'IP de l' ancien AP.
      Après un intervalle approprié de temps, quand toutes les réponses sont reçues,  le nouveau AP publie "Announce response" pour indiquer son statut opérationnel.  
      Le nouveau AP va (comme  tous les APs) renvoyer un "Announce response" pour continuer à informer tous les APs participants, au sujet de tous les changements du statut.

   Il y a 3 méthodes différentes, ce sont les Announce Procedures:  
* 'pick and go'. 
* central control method. 
* distributed control method. 

      Voici les figures illustrants le fonctionnement de chaque méthode :


pick and go


Central Control Method



Distributed control method

      III.14.2.2 IAPP Handover Protocol  
      Deux types de Handover PDUs existent, ce sont :
* HANDOVER.request. 
* HANDOVER.response.

      Déroulement du protocole 
      Quand la station mobile s'éloigne de son ancien AP, elle doit s'associer à un nouveau AP, afin de maintenir la connexion du réseau. Par conséquent elle envoie une "Re-association Request".
      Le nouveau AP renverra une "Re-association Response" quand il accepte la station qui est en roaming. Le service de AP pour la station mobile commence en ce moment (ainsi avant l'accomplissement du procédé de Handover).
      Basé sur l'information se trouvant dans la "Re-association Request" (c.-à-d. le BSSID de l'ancien AP), le nouveau AP peut obtenir l'adresse IP de l'ancien AP, qui a été obtenue par l'Announce protocole.  En utilisant cette adresse IP le nouveau AP envoie une demande de Handover (Handover Request) à l'ancien AP (par l'intermédiaire du système de distribution). La demande de Handover portera un nombre de séquence, qui est recherché quand le nouveau AP reçoit des Handover Responses.
      Quand la réponse de Handover avec le nombre de séquence correct est reçue, le Handover est considéré être accompli.

   Les Handover Procedures sont les trois suivantes :	
* Normal Handover Procedure. 
* Handover Retransmission. 
* Handover Network Recovery.

      Voici les figures illustrants le fonctionnement de chaque procédure :


Normal Handover Procedure


Handover Retransmission


Handover Network Recovery

      III.14.2.3 WMP Station Announce Protocol
      Autre que l'IAPP Announce Protocol et l'IAPP Handover Protocol nous trouvons le WMP Station Announce Protocol qui est mis en application pour partager l'information d'une station nouvellement associée, qui n'est pas en état de roaming, et pour soutenir des installations où on emploie des AP's qui ne mettent pas en application l'IAPP.
      WMP (WaveLAN Management Protocol) est une définition de protocole pour soutenir plusieurs fonctions qui ne sont pas définies par la norme IEEE 802.11.  

      Pour compléter le protocole d'IAPP une utilisation de WMP est faite pour adresser les conditions qui ne sont pas couvertes par IAPP.
      Une fonction appelée "WMP Station Announce message" est mise en application dans WMP, dans le but d'adresser deux conditions où IAPP ne peut pas être employé :  
      1.  Une STA se déplace d'un AP à un autre mais elle a été atteinte pendant son mouvement, le forçant ainsi d'effectuer une "Association" plutôt qu'une "Re-association". Pendant que la STA peut encore être connue par l'ancien AP, un mécanisme est nécessaire pour mettre à jour les tables de pont (bridge tables).
       2.  Le réseau est un réseau mixte où non tous les APs supportent l'IAPP.  Dans ce cas-ci l'ancien AP n'est pas connu par le nouveau AP, et donc le nouveau  AP ne peut pas exécuter le protocole de Handover. 

      Le schéma de base de ce protocole implique que le nouveau AP publiera un message multicast sur son système de distribution (par exemple côté Ethernet) au nom d'une station qui est en roaming et (re-)associes à cet AP. Ce message est un message de MAC multicast (par suite, il est différent du message IP multicast utilisé dans l'IAPP Announce Protocol).
      C'est un flot à sens unique de message (one-way message flow). Aucune réponse n'est prévue ou est exigée.  L'adresse de destination de la trame est une adresse multicast, alors que l'adresse de source est l'adresse MAC de la station mobile (ainsi pas l'adresse MAC de l'AP qui a envoyé la trame).  Les ponts qui reçoivent ce message, et détectent que l'adresse de source s'est déplacée d'un Bridge-port à un autre, mettront à jour, dynamiquement, leurs bridge tables, pour refléter le mouvement de la station mobile.

      Finalement, en deux mots, l'IAPP est une prolongation de la norme IEEE802.11 pour soutenir l'interopérabilité, la mobilité, le handover et la coordination parmi les APs de WLAN. Il fournit des moyens pour rendre possible la communication entre les Aps. Il est mis en application sur l'IP et emploie UDP/IP et SNAP comme protocole de transfert. 

 CHAPITRE IV       Le réseau Bluetooth 
      Introduction
      Bluetooth est une technologie de communication radiofréquence courte distance et à faible consommation utilisant la bande de fréquence 2,4 GHz. L'objectif de Bluetooth est de remplacer les différents câbles par une connexion radio universelle permettant une communication entre tous les équipements électroniques. L'interopérabilité est garantie par l'implémentation d'une pile de protocole définie par la spécification Bluetooth. Celle-ci est la clé de la mise en oeuvre de la technologie. Elle permet d'interfacer des protocoles existants (TCP/IP, Commandes AT, ...) et offre des mécanismes de haut niveau tels que le Service Discovery Protocol (SDP).
      Lancé par Ericsson en 1994, Bluetooth a été conçu avant tout pour permettre les échanges de données entre les appareils numériques (assistant, téléphone, appareil photo, portable...). Il offre des débits moyens (1 Mbits/s en théorie) sur un rayon limité (10 à 30 mètres en pratique).
      Sortie officieuse en 1998 par 3Com, Agere, Ericsson Inc., IBM Corporation, Intel Corporation, Microsoft Corporation, Motorola Inc., Nokia, Lucent, et Toshiba Corporation, Bluetooth a séduit plus de 2100 industriels, regroupés au sein du Bluetooth SIG (Bluetooth Special Interest Group). Lors du lancement, les 9 constructeurs se sont alliés pour donner à Bluetooth les moyens de s'imposer comme la norme de référence pour les transferts de données et de voix, au milieu de la foule de normes sans fil telles que HomeRF, le DECT, ou l'IEEE 802.11b. 
      Le spectre de fréquences utilisé est 2,4 GHz, le même qu'utilisera la téléphonie de 3ème génération.
      L'une des raisons du succès de Bluetooth auprès des industriels est la "gratuité" de son utilisation. En effet, tout le monde peut développer du matériel ou des logiciels utilisant Bluetooth en s'inscrivant gratuitement sur le site du SIG et en téléchargeant les spécifications. Conséquence : la technologie s'est développée rapidement. Comparativement, la norme IEEE 802.11b (Wi-Fi) a mis près de 10 ans à aboutir.
      IV.1 Utilisation du réseau Bluetooth 
      Bluetooth trouve son utilisation dans des situations existantes mais qui jusque-là nécessitaient la présence d'un fil. On peut ainsi connecter presque tout ce qui était relié par un câble mais sans câble, une imprimante et un PC, par exemple. Avec Bluetooth une connexion à l'Internet est possible grâce à des bornes placées dans des endroits stratégiques, aéroports, centres commerciaux, aire de repos sur autoroute. Ainsi, le possesseur de matériel Bluetooth pourra accéder à tout instant aux informations dont il a besoin comme l'horaire de son avion, l'état du trafic ou les promotions en cours dans son centre commercial.
      Toutefois, Bluetooth n'a pas été prévu pour supplanter les réseaux sans fils existants. La norme a été conçue pour les téléphones mobiles, les assistants personnels, et tout appareil communicant en général. 
      L'un des points forts de la technologie est sa très faible consommation d'énergie, une condition indispensable pour un appareil mobile dont le poids est déjà, en grande partie, dû à la batterie. En contrepartie, la liaison n'a qu'une dizaine de mètres de portée. Cette limitation, voulue, se justifie par le type d'appareil que Bluetooth entend faire communiquer : assistant personnel ou PC portable, téléphone mobile, appareil photo numérique et PC. Des appareils, qui, le plus souvent, se trouvent à une faible distance les uns des autres.
      La norme Bluetooth 2.0 est déjà en cours d'élaboration. Elle repoussera les distances de communication à une centaine de mètres et devrait encore étendre le nombre de périphériques communicants au sein des réseaux Bluetooth. Le débit autorisé devrait également passer de 1 Mbits/s à 10 Mbits/s.

      IV.2 Architecture du réseau Bluetooth [1]


Architecture Bluetooth 

      Les protocoles utilisés dans Bluetooth sont divisés en 4 catégories :
   1. Le Bluetooth core : composé de la Radio Frequency, de la Bande de base, du link Manager, du L2CAP et du SDP.
> Radio Frequency (RF) : elle est en charge de l'émission et de la réception du flux de bits modulés.
> Bande de base : elle est en charge de la synchronisation entre unité, de l'établissement de liaison, du multiplexage, des paquets, du contrôle de flux, de la détection et de la correction d'erreur.
> Gestion de liens (link manager) : il est en charge de la gestion des états, du contrôle des paquets et du flux sur le lien.
> Gestion et contrôle de liens logiques (Logical Link Control and Management) : il est en charge du multiplexage des protocoles utilisateurs.
> SDP Service discovery Protocol : il a pour rôle la recherche de services.

   2. Les protocoles de remplacement de câble : composé du RFCOMM, du AT Commands. 
> RFCOMM : émulation d'un câble série entre deux périphériques Bluetooth. Ainsi, des applications fonctionnant directement sur un port série sont capables de communiquer entre elles via un lien Bluetooth ce qui permet entre autre d'effectuer un transfert de fichier.

      IV.3 Principe de fonctionnement



      Le Bluetooth Radio définit 79 cannaux séparés  par une fréquence de 1MHz. Le pemier canal commence à 2.402 GHz avec une bande de garde de 2 MHz. Le dernier canal se trouve à 2.48 GHz avec une bande de garde de 3.5MHz.
      Le débit de base est de 1 Mbits/s. L'envoi des informations s'effectue par paquets, comme lors des communications par IP. Ces paquets sont encadrés de blocs de données de contrôle identifiant notamment l'appareil auquel sont destinées les informations. Ces données de contrôle permettent de plus la mise en réseau des appareils équipés de la puce. Le nombre d'appareils chaînés étant limité à 8, on parle ici de picoréseaux, ou piconets (mais on peut chaîner jusqu'à 10 mini-réseaux pour former une chaîne totale de 72 appareils : 8 x 10 à 8 appareils servant de passerelles, donc communes à deux picoréseaux).
      Sept appareils peuvent donc simultanément dialoguer avec l'ordinateur maître chargé d'orchestrer et d'aiguiller les communications. Le maître est également chargé de superviser la discussion entre deux appareils esclaves. Avec la condition qu'un maître ne peut communiquer qu'avec des esclaves, quand même plusieurs maîtres peuvent coexister sur le picoréseau, comme c'est indiqué sur le schéma ci-dessus. 
      Le contrôle des données effectué sur les paquets émis permet également d'adapter le débit aux types d'informations circulant en fonction des appareils connectés.
      On peut distinguer trois types de liaisons :
> Les liaisons synchrones à débit élevé.
> Les liaisons asynchrones.
> Les canaux voix/données.


   IV.3.1 Les liaisons synchrones à débit élevé
      Les connexions synchrones possèdent un débit bi-directionnel de 432 Kb/s. Les données transitent avec la même rapidité de l'esclave vers le maître que dans le sens inverse. Ce type de liaison s'avère particulièrement adapté lorsque deux appareils ont le même besoin de puissance de communication. Typiquement, c'est le lien qui sera privilégié dans le cadre d'une interconnexion de plusieurs ordinateurs en picoréseau, quand plusieurs utilisateurs souhaitent accéder aux données de chacun. Une machine maître peut supporter jusqu'à 3 liaisons du type synchrone avec ses esclaves.
      Le flux de données étant continu, il n'y a jamais de rupture du débit. Cela n'empêche pas en revanche les possibles pertes d'informations dues à une erreur de décodage de l'information envoyée. Un paquet signifiant l'erreur est alors envoyé à l'émetteur qui réadresse l'information. Aussi pratique que ce soit lors des échanges de données entre deux machines, ce contrôle d'erreur et les pertes d'informations momentanées potentielles rendent impossible l'utilisation de ce type de liaison avec des appareils dont le but serait de faire transiter des sons tels que la voix, comme avec les téléphones.
      IV.3.2 Les liaisons asynchrones
      Le mode asynchrone privilégie un débit élevé dans une direction : 721 kb/s dans un sens, contre seulement 57,6 kb/s dans l'autre. La direction peut être fixée temporairement par l'utilisateur ou par l'application et implique la définition d'un maître et d'un esclave entre les périphériques communicants. C'est la solution qui sera retenue en principe dans le cadre d'un accès à Internet via Bluetooth si les téléchargements sont plus fréquents que les uploads.
      De même, cette solution sera également celle préférée pour les imprimantes. Il est en effet inutile de réserver une large bande aux communications de l'imprimante vers le poste de travail. En revanche, les communications asynchrones peuvent présenter des discontinuités. Elles ne sont donc pas adaptées à la transmission de parole, de vidéo (même si le débit actuel, limité à 1 Mbits/s ne permet pas d'envisager de toute façon de solution plein écran), ou de musique.
      IV.3.3 Les canaux voix/données
      Enfin, Bluetooth propose trois canaux dits "vocaux" synchrones. Bidirectionnels, ils possèdent un débit de 64 Kb/s. 
      Plus clairement, le débit de 64 Kb/s est assuré simultanément en envoi et en réception et s'avère donc particulièrement adapté à la transmission de la voix ou de tout fichier numérique devant être reconstitué en temps réel : communication téléphonique, MP3, etc.
      IV.4 La communication sous Bluetooth 
      Les appareils Bluetooth doivent respecter un standard de communication. Ce standard est basé sur le principe des paquets. Ces derniers constituent les briques de base de la communication entre les appareils Bluetooth.
      Comme nous l'avons vu, il existe deux façons de transporter les paquets dans cette norme ; le transport connecté synchrone orienté (ou SCO) et le transport asynchrone non connecté (ou ACL) :
* Les liens de connexion SCO : Ces liens sont des connections symétriques point à point entre un maître et un seul esclave au sein d'un picoréseau. Le maître maintient ce lien via des "slots " qu'il réserve et qui reviennent à intervalles réguliers. Dans ce cas là, on travaille en mode commutation de circuit. C'est la régularité du débit de ce mode qui le rend idéal pour le transport des données de type vocales. Un maître peu supporter jusqu'à trois liens de communication SCO simultanément. Un esclave peut lui en supporter trois avec le même maître ou deux avec des maîtres différents. Les paquets de type SCO ne sont jamais retransmis. 
* Les liens de connexions ACL : Ce sont des connections point à multi point entre le maître et tous les esclaves de son picoréseau. Dans les "slots" qui ne sont pas réservés pour les liens SCO, un maître peut établir un lien ACL avec un esclave, même avec ceux déjà impliqués dans une connexion de type SCO. Ce mode permet donc la commutation de paquet. La retransmission peut être utilisée avec ce type de paquet. 
      IV.5 Les paquets Bluetooth 
      Le format standard des paquets est le suivant :
72 bits
54 bits
[0 - 2745 bits]
Code d'accès
Entête
Corps du message
Format des paquets Bluetooth 
   Les 72 premiers bits servent à la synchronisation entre les composants Bluetooth. L'entête quant à elle permet :
* De numéroter les paquets (ré-ordonnancement). 
* D'indiquer de quel membre d'un picoréseau émane ce message (0 => 7). 
* De préciser le type du paquet que l'on est en train de consulter. 
* De dire si oui ou non un récépissé est attendu en retour à ce message. 
* De contrôler sa propre cohérence (CRC). 
      Le corps sert lui à stocker les données à transporter. Il contient généralement un CRC de 8 ou 16 bits. Son utilisation peu varier, comme nous le verrons par la suite. L'envoie d'un paquet nécessite un "slot".
   Lorsqu'un appareil Bluetooth émet un paquet, celui-ci peut appartenir à une des trois grandes familles de paquets existants, son type étant précisé dans le header :
* Les paquets standards : Ils sont utilisés dans les opérations "administratives". On entend par-là que le contenu de ces paquets est dédié à la gestion des connections entre les appareils. 
* Les paquets SCO : Comme son nom l'indique, ce type de paquet est utilisé pour les communications de données de type SCO. 
* Les paquets ACL : Il existe également des paquets spécifiques au mode de transmission de données ACL. 
   Pour chacun de ces types, plusieurs sous catégories existent. Les différents types de paquets qui en découlent se sont vus attribuer une nomenclature. On distingue dans cette nomenclature les paquets suivants :
* Les paquets DV : Pour "Data Voice Packet". Ce type hétéroclite permet de transporter à la fois des données et de la voie. 
* Les paquets DM x : Pour "Medium Data rate packet". Ce type de paquet n'est disponible qu'en mode ACL. Cette dénomination est due au fait que le corps de ce type de paquet est toujours encodé afin d'obtenir de la redondance (prévention d'erreur). 
* Les paquets DH x : Pour "High Data rate packet". Ce type de paquet n'est également disponible qu'en mode ACL. Son nom vient du fait qu'aucun encodage de prévention d'erreur n'est employé, d'où un meilleur taux de transfère. 
* Les paquets HV y : Pour "High Quality Voice Packet". Ce type de paquet n'est disponible qu'en mode SCO. Ces paquets n'utilisent pas de CRC dans leur corps. 
      Le x dans les notations "DM x" et "DH x" remplace un des chiffres suivants : 1,3 ou 5. Ce chiffre représente le nombre de slots sur lesquels ce paquet s'étend. Par exemple les paquets de type DM3 s'étalent sur 3 slots. 
      Le y dans la notation "HV y" permet de préciser quel type de prévention d'erreur est utilisée : 
      y = 1 <=> 1/3 FCE 
      y = 2 <=> 2/3 FCE 
      y = 3 <=> lorsqu'il n'y a pas de protections mise en place. 
      IV.6 Les protocoles de connexion Bluetooth 
      Afin de montrer le fonctionnement du protocole Bluetooth lors d'une connexion, nous allons prendre un exemple simpliste. Soit deux puces Bluetooth notées M et E. Ici M jouera le rôle du maître et E celui de l'esclave. Le maître et l'esclave sont au début dans un état dit passif. La puce M va initialiser un lien avec la puce E.
      L'état passif pour une puce Bluetooth signifie principalement une consommation d'énergie réduite. Dans un état passif il existe plusieurs sous états. Ceux-ci servent durant l'établissement d'une connexion.
      Le schéma suivant permet de mieux comprendre le mécanisme de connexion :

Etablissement d'une connexion entre un maître et un esclave
      Au début du processus, le maître M doit se trouver dans le sous état "Inquiry" et l'esclave E dans l'état "Inquiry scan" :
1. Etant dans l'état "Inquiry", M envoie un signal pour prévenir E qu'il souhaite initialiser une connexion. E se trouve alors dans l'état "inquiry scan". 
2. Si E se trouve à portée et qu'il est dans l'état " Inquiry scan ", il passe alors dans le sous état " Inquiry response " puis répond au maître. La réponse de E comporte entre autre son adresse ainsi que des informations sur son horloge. 
3. Une fois que E a envoyé sa réponse, il passe dans l'état "Page Scan". Il se met ensuite en attente d'un message comportant sa propre adresse sur un des 80 canaux existants. Lorsque M reçoit le message réponse de E, celui-ci passe dans l'état " page ". C'est à dire que M stocke les informations reçus (pagination). Ces informations permettent à M d'avoir conscience de la présence de E. Lorsque M souhaite poursuivre le processus de connexion, celui-ci renvois un message réponse en y plaçant l'adresse de E. Ce message est renvoyé plusieurs fois sur tous les canaux. 
4. Lorsque E voit une réponse à son nom arriver, il se place dans le sous état " Slave response " puis renvoie un message réponse à M en y joignant son code d'accès. 
5. De son coté M, une fois ce code d'accès récupéré, se place alors dans un état " Master response " et renvoie un paquet de type FHS à E. Ce paquet de type FHS (Frequency Hopping Syncronisation) permet à E de se synchroniser avec M. 
6. Une fois ce dernier message envoyé, M passe dans l'état "connecté". De même, lorsque E reçoit ce message il passe aussi dans l'état "connecté". 
   Ici l'état "connecté" n'est pas un sous état. Pour vérifier que la connexion s'est bien passée, le maître envois un paquet de type POLL et attend en retour n'importe quel type de paquet. Si une connexion s'est effectivement bien passée, l'esclave est synchronisé avec son maître et se trouve sur le bon canal de communication.
   Une fois qu'un esclave est dans un état "connecté", celui-ci peut à nouveau se trouver dans plusieurs sous états : 
* Sous état actif : en mode actif, le maître comme l'esclave participent activement à la communication sur le canal (écoute, envois de paquets, réception). 
* Sous état suspendu (hold) : dans un état suspendu, un esclave ne peut plus recevoir que des messages de type SCO. Cet état dure pendant N slots. Ce dernier coefficient est fixé par le maître. Les messages de type SCO arrivants à intervalles réguliers, l'esclave peu s'endormir lorsqu'il n'est pas susceptible d'en recevoir. Ceci permet d'économiser de l'énergie. 
* Sous état parqué (park) : Un esclave dans cet état est très peu actif (économie d'énergie). Lorsqu'un esclave est dans l'état parqué celui-ci ne reçoit plus du tout de messages ni n'en envois. Sa seule activité est de se réveiller de temps en temps pour se synchroniser avec le maître grâce à des "balises" que celui-ci envois régulièrement. Cet état passif permet de libérer une des 7 places disponibles dans un picoréseau. Plus de 7 périphériques Bluetooth peuvent ainsi cohabiter au sein d'un même picoréseau en jouant avec cette possibilité. 
* Sous état tâtonnement (sniff) : Dans le sous état tâtonnement, un esclave peut alterner N slots d'état endormis (économie d'énergie), et K slots d'états actifs. 
      IV.7 Les picoréseaux et la sécurité
      Pour faire cohabiter les picoréseaux de demain, les puces Bluetooth travaillent par sauts de fréquences sur 79 canaux espacés d'1 MHz. En fonction de l'encombrement des transmissions, émetteurs et récepteurs peuvent changer de canal jusqu'à 1 600 fois par seconde. Les paquets d'information envoyés doivent alors indiquer dans les blocs de contrôle, en plus du périphérique destinataire, la fréquence sur laquelle se trouvera le paquet suivant. 
      Ce qui explique la différence entre le débit théorique d'1 Mbits/ s et la pratique à son maximum, soit 2 x 432 = 864 Kb/s dans le cas d'une liaison en mode synchrone.
      Outre ce saut de fréquence, un codage sur 128 bits des informations circulant sur le picoréseau vient sécuriser les transactions de données. Ce niveau de protection, grand sujet de polémique en ce moment, est estimé insuffisant par les chercheurs des laboratoires américains Lucent Bell qui ont confié au New York Times que les données transmises selon la norme Bluetooth sont facilement interceptables et décodables.
      IV.8 Mode d'emploi
      Pour qu'un picoréseau s'établisse, chaque appareil doit posséder sa puce Bluetooth. Pour les ordinateurs, plusieurs solutions existent déjà. Certains portables, les plus récents, en sont déjà munis en série, on trouve PCI, PCMCIA, USB. 
      En comparant Bluetooth à l'infrarouge, on trouve un nouvel atout : quand bien même son débit est aujourd'hui très inférieur (1 Mbits/s contre 16 Mbits/s), son champ de vision est plus important (360 degrés) et il supporte une distance de 10 mètres contre 1 mètre pour l'infrarouge.
      IV.9 Fréquence et puissance
      Les fréquences mises en jeu par Bluetooth (2,45 GHz) sont les mêmes que celles utilisées dans nos micro-ondes dont le principe même est de provoquer une activation des vibrations des molécules d'eau et d'entraîner un échauffement des tissus. Le consortium rassemblant ses géniteurs se veut pourtant rassurant : étant donné la petite portée de ces appareils (10 mètres) et la faiblesse de la puissance utilisée (100 mW au maximum), la puissance électromagnétique reçue par les utilisateurs reste extrêmement limitée et ne présente aucun danger.
      Le responsable commerciale chez Ericsson France affirme que le dégagement en W/cm² d'un seul four à micro-ondes serait comparable à celui de 1 000 téléphones portables.
      Les appareils exploitant la technologie Bluetooth travaillent sous trois niveaux de fréquence :
      - niveau 1, 100 mW
      - niveau 2, 2,5 mW
      - niveau 3, 1 mW
      IV.10 Configuration d'utilisation de Bluetooth 
      Un exemple de configuration pour une communication suivant la méthode Bluetooth est présente sur la figure suivante.

      
      IV.11 Handover dans Bluetooth 
      IV.11.1 Introduction
      Bluetooth est une technologie sans fil à courte portée de communication, idéale pour de petits, personnels dispositifs. Elle a été conçue à l'origine pour remplacer les câbles qui relient des PCS, des imprimantes et des réseaux. Cependant, son utilisation comme interface pour les dispositifs mobiles aux systèmes de réseau d'accès a augmenté. 
      
      Bluetooth définit deux types pour soutenir l'accès de réseau (networking support), le profil d'accès de LAN (employant la PPP) et le Personal Area Network (employant BNEP). Dans les deux cas, la prétention est qu'un dispositif spécifique de Bluetooth appelé un point d'accès permet à des dispositifs de client de Bluetooth d'être connectés à une infrastructure. C'est semblable à la définition des points d'accès dans IrDA et 802.11.

      Bluetooth a une gamme limitée (de 15 cm à 100 m selon l'exécution). Pour pouvoir couvrir un grand domaine, il est nécessaire de déployer un grand nombre de points d'accès, d'un mode cellulaire régulier, mais les gens les mettront où ils veulent ou où ils peuvent. Ceci entraîne la possibilité d'avoir plusieurs réseaux logiques de Bluetooth et qui sont possédés par différentes entités. 
      La plupart des dispositifs de Bluetooth sont des dispositifs personnels, et par suite se déplacent avec leur propriétaire. Une bonne manière de soutenir la mobilité est de permettre au dispositif de se bouger librement d'un point d'accès à l'autre sans besoin d'interposition d'utilisateur. Ce qui est meilleur encore, c'est d'émigrer d'une manière transparente des connexions de réseau.

      Les téléphones cellulaires équipés par Bluetooth peuvent employer Bluetooth comme une interface radio alternative aux réseaux cellulaires dans des hot spots -surfaces où l'accès de réseau de Bluetooth est activé- parce qu'il peut offrir des connexions beaucoup meilleur marché que les réseaux cellulaires de la troisième génération (3G).

      IV.11.2 Limitations principales qui empêchent l'adoption large de Bluetooth 
      Ce qui empêche l'adoption large de Bluetooth dans des dispositifs véritablement mobiles sont la Mobilité' et la Capacité spatiale'.  

      La mobilité : une des limitations principales du système d'accès de réseau de Bluetooth est la manque de handover pour contrôler la micro-mobilité. Quand un utilisateur s'éloigne de plus de 10 m d'un point d'accès, la connexion est coupée et l'utilisateur est déconnecté.
      La capacité spatiale : Un point d'accès de Bluetooth peut supporter au maximum 7 utilisateurs simultanément. Cependant, excepté l'utilisation personnelle, ce n'est pas suffisant  dans beaucoup de situations telles que les hotspots publics et les bureaux occupés.

      IV.11.3 Quelques propositions du Handover dans Bluetooth 
      Les deux profils de Bluetooth, que nous avons défini précédemment, ne fournissent ni l'un ni l'autre des normes pour le handover. Il y a quelques obstacles pour mettre en application le handover de Bluetooth. En particulier, le long temps d'installation des connexions rend le handover de Bluetooth impraticable.
      
      Jusqu'à maintenant aucune méthode standard de handover dans Bluetooth n'existe, c'est pourquoi nous allons ici parler de quelques solutions non standard.
      
      Tout d'abord, nous allons définir un mécanisme de base de roaming. Et puis nous allons ajouter à ce mécanisme de base quelques autres mécanismes facultatifs pour l'améliorer (quelques optimisations).
   
      Le but principal du mécanisme de base est d'être simple, robuste et de travailler dans toutes les situations. Le but est qu'il fonctionne quel que soit le dispositif, les détails d'implémentation, les conditions et l'environnement, et qu'il soit facile à mettre en application et fonctionne dans tous les dispositifs possibles soutenant l'accès  LAN ou le PAN.
      
   IV.11.3.1 Le mécanisme de base
      Il est tout à fait simple. Le dispositif de Bluetooth est connecté à un point d'accès, et se déplace hors de la gamme. Après un certain temps (supervisionTO) la pile de Bluetooth dans le dispositif déclare que le lien est mort et ferme la connexion de  LMP. A ce moment, la connexion de L2CAP employée par le trafic de réseau reçoit un événement (LP_DisconnectInd) et se ferme. Les couches les plus élevées sont maintenues dans le mode suspendu jusqu'à ce que le procédé de roaming soit terminé (TCP/IP peut s'arrêter si nous prenons trop de temps). 
    
      A ce moment, le dispositif de Bluetooth exécute une enquête (Inquiry). Si l'Inquiry ne trouve aucun point d'accès, le noeud continue l'enquête, jusqu'au point où il arrête et ferme les couches les plus élevées (PPP ou BNEP). 
        
      Si le dispositif de Bluetooth trouve un point d'accès, il s'y connecte et questionne son disque de service de SDP. Si le Service Name de ce point d'accès est le même que celui du point d'accès précédent, le dispositif s'y connecte. Si le Service Name est différent, et si le dispositif découvrait d'autres points d'accès dans le processus d'enquête, le dispositif devrait essayer de se connecter à ces points d'accès.  En d'autres termes, nous employons le Service Name comme marque logique de réseau, comme l'ESSID dans 802.11. 
       
      Si le dispositif ne trouvait aucun point d'accès avec le même Service Name, il peut essayer de se connecter à un des autres points d'accès, continuer à faire l'enquête, ou renvoyer un échec à l'utilisateur. Un point d'accès avec un Service Name différent est contrôlé par une autorité différente et peut ne pas offrir les mêmes options de connectivité, tellement il n'y a aucune garantie que nous pouvons nous connecter à lui, avoir les mêmes services et reprendre les connexions suspendues. 
      
      Quand le dispositif se connecte au point d'accès, il s'enregistre à lui et ouvre une connexion L2CAP avec ce point d'accès, et puis rebranche la couche la plus élevée suspendue sur cette connexion de L2CAP. Pour la PPP, nous devons établir une nouvelle connexion de PPP (LCP et IPCP) et réorienter le trafic d'IP sur cette nouvelle instance de PPP. Pour BNEP, nous devrions pouvoir rebrancher l'ancienne instance de BNEP sur la nouvelle connexion de L2CAP (excepté si nous changeons l'IP subnet, qui devrait se produire seulement si le Service Name est différent). 
      
      Pour le point d'accès, il est comme si le dispositif se connecterait à lui pour la première fois, et il veut faire passer le trafic d'IP dans les deux sens. L'ancien point d'accès va également s'arrêter, ferme la connexion de L2CAP ainsi que les couches plus élevées, et vide ses tampons de données. 
       
IV.11.3.2 Les défis
   Le roaming est déjà quelque chose que les autres technologies implémentent, par exemple le 802.11. Cependant, Bluetooth a un certain nombre de caractéristiques formant du roaming le plus provocant et intéressant.  
   
   IV.11.3.2.1 La latence de découverte
   Le procédé entier de découverte dans Bluetooth prend un long moment. La découverte étant le processus par lequel un dispositif de Bluetooth connaisse la présence d'un dispositif et se connecte à lui. Habituellement, une découverte se compose de 3 phases, d'enquête, de pagination et de la connexion. 
   
   Habituellement, L'enquête est la plus lente. Ce temps dépend du temps d'enquête elle-même (combien de fréquence balayée) et le temps entre les enquêtes. Pour le point d'accès, il y a clairement une différence entre la sortie et la latence de découverte, si nous augmentons le temps entre les enquêtes, nous assignons plus de temps pour le trafic de données mais la découverte sera plus lente.
   
   La partie restante de la découverte est plus rapide. La pagination, une fois faite après une découverte, est assez rapide (moins de 100ms). Connecter la couche la plus élevée est aussi bien assez rapide ; l'établissement d'un L2CAP dépend du nombre d'options de L2CAP qui sont échangées mais devraient être bien moins de 50ms, pour PPP elle devrait être moins que 100ms (assumant une bonne exécution), et pour PAN aussi bien (en fait, dans la plupart des cas PAN devrait être plus rapide que PPP).  
   
   Ainsi, une bonne implémentation devrait pouvoir aller du début de la pagination jusqu'au flux d'IP dans moins de 250ms. Bien sur dans un environnement bruyant, cela pourrait prendre beaucoup plus longtemps. Mais c'est le type de retard qui n'affecte pas trop l'expérience d'utilisateur et le TCP/IP.  
   
   Pour récapituler, la latence de découverte est dans la plupart  du temps  due au processus d'enquête. Faire l'enquête plus efficacement ou la sauter, cela va améliorer le temps de latence.  
   
   IV.11.3.2.2 La nécessité de se connecter pour identifier l'AP
   Pour les protocoles qui sont conçus comme un système cellulaire, tel que 802.11, la tâche d'identifier un point d'accès est assez franc. Les paquets envoyés en tant qu'élément du procédé de découverte (appelé Beacons) identifient si le noeud est un point d'accès ou pas et annoncent le réseau logique (c.-à-d. dans 802.11 la balise contient l'ESSID du réseau  logique). 
   
   Dans Bluetooth, ce n'est pas le cas. A la fin du processus d'enquête, le dispositif de Bluetooth a juste une liste de dispositifs qui soutiennent le profil d'accès de LAN ou le profil de PAN. En ajoutant l'information correcte au paquet FHS, il faut se rétrécir vers le bas à la liste de points d'accès à proximité.  
   
   Mais, ce n'est pas assez bon, parce que nous visons à soutenir les réseaux logiques Co-localisés et nous voulons favoriser le handover dans le même réseau logique et l'IPsubnet autant que possible. D'ailleurs, les points d'accès peuvent être installés avec différents droits d'accès et configurations de sécurité, ainsi le noeud peut ne pas pouvoir employer tous les points d'accès qu'il trouve.
   
   L'information, requise pour choisir le bon point d'accès, fait partie du SDP record. Et pour accéder au SDP record, le dispositif doit se connecter au point d'accès approprié et faire une requête de SDP. 
   Cela signifie qu'en effectuant le roaming, le dispositif peut avoir besoin de se connecter aux points d'accès multiples, questionner leur SDP, jusqu'à ce qu'il trouve le convenable. Chaque connexion et requête sont tout à fait rapides, mais elles s'ajoutent, ainsi s'il y a un grand nombre de points d'accès privés ou des réseaux co-localisés, ceci peut prendre un certain temps. 
   
   Pour récapituler, le problème est que nous ne connaissons pas à quel point d'accès il faut se connecter. S'il y a beaucoup de choix, trouver celui qui est convenable peut prendre un certain temps.  
   
   IV.11.3.2.3 La manque de RSSI
   La troisième issue est que beaucoup de dispositifs de Bluetooth manqueront de RSSI (Received Signal Strength Indicator, indicateur de la puissance du signal reçu). Le RSSI mesure la puissance du signal radio entrant, et est généralement employé dans des systèmes de CSMA pour évaluer l'état du canal (libre ou occupé). Bluetooth, comme il emploi un mécanisme d'accès de canal de TDMA, explicitement n'exige pas un circuit de RSSI dans son implémentation. Mettre en application un fiable et suffisamment précis RSSI dans la radio est cher. 
   
   Le manque de RSSI a des implications certainement fortes sur le roaming.  Quand un noeud se connecte à un point d'accès, nous voudrions sélectionner le meilleur point d'accès. Il pourrait y avoir des points d'accès multiples offrant le même service, et le plus souvent le meilleur est celui dont nous recevons le signal le plus fort (parce que nous obtiendrons un BER inférieur et nous diminuerons la fréquence des handovers).  
   
   Sans RSSI, nous avons très peu de manières pour choisir le meilleur point d'accès. Le BER (Bit Error Rate) fonctionnerait seulement dans la gamme inférieure du RSSI, s'il n'y a aucune interférence et serait moins fiable.  Et nous ne voulons pas compter sur un système de localisation...  
   
   Dans la plupart des systèmes sans fil, RSSI est également employé pour détecter l'instant d'exécution du handover. Fondamentalement, quand le RSSI est au-dessous d'un certain niveau, le dispositif décide de rechercher un autre point d'accès donnant un meilleur service. Détecter un échec de lien sans RSSI est rusé, parce que le fading et l'interférence peuvent rendre le lien indisponible pour une certaine période. La seule option est de déclencher le handover quand le lien a été inactif après un moment assez long (supervisionTO dans Bluetooth).  Mais, ceci ne permet pas de faire un roaming pro-actif et augmente le temps qu'il prend pour effectuer un bon roaming. 
   
   Pour récapituler, sans RSSI nous n'avons pas une bonne manière pour choisir le meilleur point d'accès, d'évaluer la qualité de lien avec le point d'accès et de détecter efficacement quand nous devrions commuter le point d'accès.
   
IV.11.4 Optimisations
   Le schéma de base décrit ci-dessus pour le handover est très simple, mais malheureusement pas très efficace. Dans cette section, nous proposerons un ensemble d'optimisations pour améliorer l'exécution du handover. 
   
   La plupart de ces optimisations sont simples et apportent quelques avantages réels. Ces optimisations assumeront certaines configurations de réseau communes et habituelles, mais peuvent ne pas travailler tout le temps. Ces optimisations peuvent être employées seules ou combinées pour améliorer la performance globale. En fait, quelques implémentations dépendent des autres. 
   
   Les premières optimisations seront génériques et non pas un cas spécial pour le Bluetooth. D'autre part, le deuxième ensemble d'optimisations sera consacré à Bluetooth, en abordant les issues spécifiques de Bluetooth et en employant les caractéristiques de Bluetooth. 
   
   IV.11.4.1 La communication entre les APs
   L'optimisation la plus commune des réseaux 802.11 est d'avoir un protocole pour la communication entre les points d'accès. Le but de ce protocole est de rincer les ressources qui étaient utilisées par le noeud en roaming dans l'ancien point d'accès. 
   Dans l'environnement sans fil, en raison des interférences et du fading, un lien sans fil peut être bloqué pendant un certain temps avant que les données puissent couler normalement. Le même cas est celui pour un noeud qui emploie l'économie de puissance (mode discontinu) et échange rarement les données avec le point d'accès. C'est pour cette raison qu'un point d'accès ne suppose qu'un noeud n'est plus associé à lui qu'après un long arrêt, et cela pour éviter de perturber une connexion qui est déjà faible.
   
   D'autre part, chaque noeud associé à un point d'accès consomme une partie des ressources de ce point d'accès. Le point d'accès doit garder un recorde de l'association (caractéristique du noeud, paramètres de sécurité, information de la connexion) et des paquets tamponnés qui sont dans leur chemin vers ce noeud.  Bien plus critique dans Bluetooth est le fait qu'il puisse y avoir seulement 7 noeuds associés à un point d'accès, ainsi nous voudrions savoir si ces 7 adresses de lien sont mises à une bonne utilisation.
   
   Quand le noeud commence le procédé de roaming, il ne sait pas précédemment s'il va réussir, par suite il ne termine pas sa connexion existante avec le point d'accès (au cas où il devrait revenir). Dans la plupart de cas, le noeud aura déjà perdu le contact avec le point d'accès quand il commence le procédé de roaming. Ainsi, fondamentalement le noeud n'informe pas le point d'accès quand il va en roaming au loin.  
   
   D'autre part, quand le noeud a été associé à un nouveau point d'accès, le nouveau point d'accès peut annoncer cette information aux autres points d'accès se trouvant sur la même infrastructure câblée, de sorte que l'ancien point d'accès sera informé et par suite enlève toutes les ressources associées à ce noeud (disque d'enregistrement, tampons de paquet et adresse de lien). 
   
   Si le temps nécessaire pour exécuter le handover est sensiblement plus rapide que l'arrêt (timeout) fait par l'AP pour désassocier un noeud, cela permet alors d'avoir comme conséquence, une économie significative de ressources dans les points d'accès. Nous pouvons augmenter le nombre de noeuds actifs par point d'accès, réduisant alors le nombre de points d'accès nécessaires. Notre espoir est de parvenir à rendre le temps de handover assez court que cette optimisation le vaut la peine.
   
   IV.11.4.2. Un nombre optimisé de handover de AP
   La première optimisation classique est de faire passer les paquets protégés de l'ancien point d'accès vers le nouveau point d'accès. 
   Pendant que le noeud exécute son handover, l'ancien point d'accès continue toujours à recevoir et à stoker les paquets du noeud en roaming, mais ne peut pas les délivrer. Quand le noeud est associé au nouveau point d'accès, le nouveau point d'accès commence à recevoir des paquets pour ce noeud en ce moment, mais ne peut pas recevoir les paquets précédents. En d'autres termes, tous les paquets envoyés de l'infrastructure pendant que le noeud exécutait le handover ne sont pas reçus par le noeud. Ces paquets devront être renvoyés de la source originale, ce qui prendra du temps et réduira la fenêtre de TCP, tout en augmentant le temps que le TCP prenne pour récupérer. D'autre part, l'ancien point d'accès a stocké la plupart de ces paquets, et elles sont, juste, en attente dans son tampon. 
    
   Quand l'ancien point d'accès reçoit le message de Désassiociation du nouveau point d'accès, il peut simplement renvoyer tous les paquets se trouvant dans son tampon et qui sont associées à ce noeud. Le nouveau point d'accès les prendra et les livrera au noeud.
   
   Dans la plupart des cas, ceci devrait accélérer de manière significative le rétablissement de TCP/IP et augmenter les performances et la fiabilité globales de la couche élevée par le handover. 
   
   IV.11.4.3 Obtenir la liste des APs voisins 
   Un des défis est que quand un noeud veut se mettre en roaming, il n'a aucune manière d'identifier quels sont les points d'accès, parmi ceux qui sont disponibles à sa proximité, qui offrent le même service que celui qu'il employait (une partie du même réseau logique). 
   
   Il y a une solution très simple pour cela. En tant qu'élément du procédé d'enregistrement, ou de façon régulière, le point d'accès pourrait envoyer au noeud la liste de points d'accès se trouvant à sa proximité et offrant le même service. Quand le noeud exécute le procédé de base de handover, il compare simplement le résultat de l'enquête à la liste de point d'accès et sélectionne un point d'accès dans le sous-ensemble commun. 
   
   Ce schéma sauverait le noeud de toutes les épreuves et les erreurs de trouver le bon point d'accès, ce qui diminuerait le temps de handover et la consommation de puissance. Pendant le roaming, le noeud n'a pas à questionner le SDP de tous les points d'accès se trouvant autour de lui, parce qu'il sait à l'avance auxquels des points d'accès il va se connecter. 
   
   Maintenant, il faut définir comment cette liste sera envoyée du point d'accès au noeud. Chaque point d'accès enverrait la liste de ses voisins immédiats, et pour chaque voisin la liste de ses voisins immédiats.
   
   Avoir la liste des voisins immédiats du point d'accès et celle des voisins de deuxième niveau devrait être suffisant pour couvrir la plupart de la vitesse de roaming et d'environnement. Se limiter à 2 niveaux permet de limiter la quantité de données échangées (cette augmentation est exponentielle avec le nombre de niveaux). Le fait que les données soient présentées d'une manière hiérarchique entraîne une duplication de l'information, mais permet de favoriser le roaming.
   
   Pour chaque point d'accès, nous voulons également transmettre l'information de synchronisation liée à la pagination et à l'enquête.  
   
   Pour récapituler, ayant que le point d'accès envoi au noeud la liste de ses points d'accès voisins, le noeud n'aura plus besoin de questionner chaque point d'accès, ce qui améliore d'une manière significative l'exécution du roaming.
   
   IV.11.4.4 Construire la liste des Aps voisins
   Si nous avons des cellules largement recouvertes, les points d'accès sont dans la marge de leurs voisins, ainsi les points d'accès peuvent découvrir les autres par l'enquête de Bluetooth. En demandant le recorde de SDP des points d'accès qu'il peut voir, un point d'accès peut établir automatiquement la liste de voisins. Puis, en utilisant un protocole au niveau des APs relatif au milieu de câble, le point d'accès peut interroger ses voisins pour leurs voisins. De cette façon, la liste de point d'accès peut être automatiquement construite et dynamiquement mise à jour sans n'importe quelle interposition humaine. L'avantage de ce schéma est que la plupart des déploiements et des configurations de réseau peuvent employer l'optimisation précédente.
   
   IV.11.4.5 La présence de AP vérifiant (AP sondant) 
   L'optimisation précédente traitait la plupart du temps la deuxième phase du procédé de base de roaming (questionnant APs). Cependant, la première phase (enquête) est également un obstacle important. En tant qu'élément de la liste de point d'accès, nous passons l'information de synchronisation pour chaque point d'accès. Fondamentalement, pour chaque point d'accès, nous voulons savoir quand il exécute l'enquête, le balayage d'enquête, la pagination et le balayage de pagination, quelle est son excentration d'horloge (clock offset) et son modèle de balayage. 
   
   Puis, en utilisant cette information, le noeud peut régulièrement vérifier s'il peut voir n'importe quel point d'accès de ses voisins. Comme le noeud a toute l'information nécessaire, il peut sonder le point d'accès seulement quand il sait  qu'il exécute l'enquête et la pagination, et devrait le trouver très rapidement. Dans la plupart de cas, il n'est pas nécessaire de se connecter, mais juste recevoir un paquet simple de FHS envoyé par le point. En faisant un sondage régulier des divers points d'accès synchronisés à leur enquête ou aux modèles de pagination (c.-à-d. sondant au bon temps), le noeud peut déterminer quel point d'accès il peut atteindre et celui qu'il ne peut pas, avec le minimum de frais. 
   
   Un point important est que le noeud conserve sa connexion au point d'accès courant, pendant qu'il fait ce sondage rapide des autres points d'accès. Si tout va bien, ce temps peut être rendu très court. La fréquence des sondes peut être ajustée dépendamment de divers paramètres (tels que le roaming, les données et taux d'erreurs). 
   
   Le grand avantage d'établir la liste de points d'accès accessibles est que quand le noeud perd son lien avec le point d'accès courant, il sait à l'avance quels sont les points d'accès accessibles, par suite il n'aura pas besoin d'exécuter une pleine enquête et peut se connecter directement au point d'accès qu'il désire. Cette connexion est plus rapide parce que le noeud sait déjà la synchronisation du point d'accès (pagination). C'est également plus fiable, parce que pendant un procédé simple d'enquête nous pouvons ne pas voir quelques noeuds dus au fading ou à l'interférence, tandis que ces données sont le résultat d'un procédé fait sur une plus longue période de temps.  
   
   En d'autre mot, l'information envoyée au noeud par le point d'accès est employée pour exécuter sans interruption quelques enquêtes rapides visées, de sorte que nous n'avons pas besoin d'exécuter une pleine enquête plus tard.  
   
   IV.11.4.6 Evaluation de la position
   Le seul défi que nous n'avons pas abordé jusqu'ici est le fait que nous ne connaissons pas quel point d'accès nous donne la meilleure qualité du service.  Ceci nous empêche de choisir le meilleur point d'accès et de savoir quand il faut exécuter le handover proactif.  
   D'autre part, dans l'optimisation précédente, le noeud examine quels sont les points d'accès qu'il peut atteindre. Et, le noeud sait également la topologie de déploiement de point d'accès (quels points d'accès sont près de qui).
   
    En corrélant ces deux informations, le noeud peut déterminer qui est le meilleur point d'accès. Pour chaque point d'accès, le noeud calcule combien de points d'accès voisins il peut voir. Le point d'accès pour lequel il peut voir plus de voisins sera  habituellement le point d'accès le plus étroit. Si ce point d'accès n'est pas le point d'accès courant, le noeud devrait commencer le procédé de handover.  
   
   En fait, si la liste de point d'accès est construite, ce que nous essayons de faire est de trouver le point d'accès dont l'environnement radio est le plus semblable au nôtre, et dans la plupart de cas c'est le point d'accès le plus étroit et meilleur. 
   
   En d'autres termes, en corrélant la liste de points d'accès que le noeud peut atteindre et la liste hiérarchique de points d'accès, le noeud peut estimer sa position, relativement aux points d'accès et choisir le meilleur. Cependant, cette optimisation est plutôt brute, fait un travail approximatif et ne fonctionnera pas sûrement dans un certain nombre de cas.  
   
   IV.11.4.7  PiggyBack RSSI 
   Comme nous avons cité précédemment, le RSSI est toujours la meilleure manière de déterminer la qualité du lien avec le point d'accès. Le problème est que nous ne pouvons pas supposer que des dispositifs de Bluetooth seront équipés de RSSI. D'autre part, le point d'accès est un dispositif plus cher, il est une ressource consacrée partagée par beaucoup d'utilisateurs et le handover est l'une de ses caractéristiques essentielles.  
   
   Ainsi, nous pouvons imaginer qu'une certaine classe des points d'accès sera équipée de RSSI, et ils pourront évaluer la qualité du lien pour chaque noeud qu'ils soutiennent. Puis, nous pouvons imaginer un protocole simple où le point d'accès envoie la mesure de RSSI au noeud. Sachant sa puissance transmise courante, le noeud peut alors estimer la qualité du lien (et peut faire le contrôle de puissance si nécessaire). 
   
   Cette information de piggyback RSSI peut également être employée pour détecter quand if faut faire le roaming, comme dans 802.11. Quand la mesure va au-dessous d'un certain seuil, le noeud déclenche le handover. Cependant, ce piggyback RSSI sera plutôt peu fréquent (pour éviter des frais), ainsi il peut être employé seulement pour le roaming relativement lent. 
   
   Une utilisation plus intéressante de PiggyBack RSSI serait pour le procédé de sondage, quand le noeud examine la présence des points d'accès. L'idée est que quand le noeud sonde pour la présence d'un point d'accès, ce dernier lui envoie la mesure de RSSI du signal qu'il reçoit de lui. Si le noeud rassemble ces PiggyBack RSSI de divers points d'accès, il pourrait ranger les divers points d'accès auxquels il peut se connecter, et pourrait par suite choisir le meilleur d'entre eux quand le temps de roaming vienne. 
   
   Puis, nous pouvons également bénéficier de ce procédé de sondage amélioré pour estimer la position de noeud. En comparant le PiggyBack RSSI des divers points d'accès sondés, le noeud peut voir si l'un d'eux offre un meilleur service que celui du courant et peut également dériver une position relative plus précise.  De cette façon, le noeud a une idée bien meilleure du moment où il faut errer, et peut faire un roaming proactif (au lieu de l'attente).  
   
   En ayant que le point d'accès renvoie un PiggyBack RSSI en tant qu'élément du procédé de sondage, le noeud peut ranger les divers points d'accès dans la limite de la qualité du lien et décider plus exactement quand exécuter le handover.
   
   IV.11.4.8  Connexion rapide d'AP
   En utilisant les optimisations précédentes, nous pouvons maintenant faire un roaming proactif basé sur la qualité de lien et notre position estimée relativement aux points d'accès. Il est également possible de devoir faire le roaming pour des raisons d'équilibrage de charge (parce qu'un point d'accès peut accepter seulement 7 noeuds).
   
     Se relier au nouveau point d'accès est plus facile, parce que nous savons son information de synchronisation. Cependant, après avoir pris la décision de se connecter à un point d'accès, il faut attendre toujours jusqu'à ce que ce point d'accès soit prêt à accepter notre connexion, c.à.d il faut attendre jusqu'à ce que le point d'accès soit en mode de balayage d'enquête ou de balayage de pagination.  
   
   Mais, dans tous les cas où nous faisons un roaming proactif, nous avons toujours une connexion fonctionnant à l'ancien point d'accès à l'instant où nous voulons nous connecter au nouveau point d'accès, et ceci nous permet de faire une optimisation simple pour surpasser ce temps d'attente. 
   
   A l'instant où le noeud veut se connecter au nouveau point d'accès, il envoie un message spécifique au nouveau point d'accès par l'intermédiaire de l'ancien point d'accès et de l'infrastructure câblée. Quand le nouveau point d'accès reçoit ce message, il renvoie une confirmation par l'intermédiaire de l'infrastructure câblée et de l'ancien point d'accès et se met en mode de balayage de pagination.  Alors le noeud se met dans le mode de pagination et se connecte immédiatement au point d'accès. L'avantage est que le noeud ne doit pas attendre jusqu'à ce que le point d'accès soit mis dans le bon mode et il peut surpasser l'enquête, ce qui économise le temps et la puissance. 
   
   En entrant en contact avec le nouveau point d'accès par l'intermédiaire de l'ancien point d'accès et de l'infrastructure, le noeud peut déclencher le mode de balayage de pagination sur le nouveau point d'accès et se connecter immédiatement à lui au lieu de devoir attendre. 

   Maintenant ayant expliqué avec détails le mécanisme de handover dans Bluetooth, citons maintenant d'une façon brève la solution BlueWIN proposée par Intium qui est une importante compagnie de Bleutooth.

   IV.11.5 La solution BlueWIN [10]
   IV.11.5.1 La structure de BlueWIN

La Structure de BueWIN

      Elle se compose de trois éléments fonctionnels : un agent de handover, des points d'accès, et des dispositifs mobiles, comme représentés sur le schéma précédent. Les rôles et les comportements des éléments sont conçus pour se conformer fondamentalement au profil d'accès de LAN et au scénario de point d'accès de réseau du profil de PAN, et sont prolongés pour soutenir le handover.  
      
      L'agent de handover se comporte comme Gateway entre le réseau local et l'Internet. Il joue également le rôle de l'agent étranger (foreign agent) défini dans IP mobile. Il contrôle des informations concernant les points d'accès et les dispositifs mobiles actuellement reliés, et route des paquets aux dispositifs mobiles.
      
      Un point d'accès est un dispositif qui a un ou plusieurs modules radio de Bluetooth et acte comme un pont, faisant une interface entre les dispositifs mobiles et le réseau câblé. Des points d'accès et l'agent de handover sont connectés via un réseau câblé tel que l'Ethernet. Les points d'accès sont installés aux positions prédéterminées pour fournir la couverture continue dans toute la surface de service.  
      
      Les dispositifs mobiles sont les dispositifs portables qui ont le Bluetooth activé avec des piles de protocole de TCP/IP. Ils accèdent au réseau en se connectant à un point d'accès. On assume que les utilisateurs des dispositifs mobiles sont des piétons.  
      Les informations sur les endroits relatifs des points d'accès dans le système de gestion de réseau sont nécessaires pour la méthode proposée de handover. Ces informations sont stockées dans une base de données dans l'agent de handover et envoyées aux points d'accès quand ces derniers sont connectés à l'agent de handover pour la première fois.

      IV.11.5.2 Le procédé de Handover
      L'idée principale de la méthode de handover de BlueWIN est d'obliger les points d'accés de faire la pagination par tour tandis que le dispositif mobile demeure dans un mode de balayage et de pagination continu. Pour garantir le handover avec succès, l'ensemble de candidat doit être choisi, pour couvrir le domaine entier que l'utilisateur peut passer par, pendant le procédé de handover. 
      En plus de la méthode de handover décrite ci-dessus, l'information d'horloge peut être utilisée pour réduire le temps de handover.

      IV.11.6 Les conclusions 
      Les spécifications de Bluetooth ne couvrent pas le handover et c'est un grand obstacle quand les dispositifs mobiles emploient Bluetooth pour accéder à un réseau. Puisque le secteur couvert par un point d'accès est petit dans le système normal d'accès de réseau de Bluetooth, le handover est crucial de contrôler la micro mobilité des dispositifs mobiles.
      
      Comme il apparaît, notre étude se base principalement sur les réseaux 802.11 et sur Bluetooth. Ayant parlé du handover dans chacun d'eux c.à.d le handover horizontal passons alors à l'idée critique de notre projet qui est le handover vertical c.à.d le handover dans des réseaux hétérogènes, cela nécessite alors que les dispositifs soient capables d'accéder plusieurs réseaux. Définissons alors l'accès multiple avant d'entrer dans les détails du Handover Vertical.
      
      
CHAPITRE V     Handover Vertical
      
      Introduction
      
      Dans la vie moderne, plusieurs technologies de transfert de données et d'accès à l'Internet existent, la gestion de réseau sans fil devient de plus en plus populaire, les infrastructures des réseaux hétérogènes croissent. D'où la nécessité devient plus importante pour pouvoir se déplacer entre les différents réseaux sans fil sans souffrir de la perte de données et sans faire participer l'utilisateur mobile et là il est nécessaire de voir la macro mobilité contre la micro mobilité, c.-à-d. faire un handover vertical. Il est à noter que le déplacement et la mobilité ne donnent aucune excuse pour couper la connexion au réseau.
  
      Les solutions mobiles pour l'accès à l'Internet sont donc un champ où la volonté de développement accélère. Se bouger librement entre les différents nets tout en gardant toujours la connexion courante est une question importante. Pour réaliser ceci nous devons manipuler des choses comme l'identification sur les différents nets et le care-of-addressing du dispositif mobile. Les différents nets peuvent employer différentes technologies pour l'accès, le LAN, le WaveLAN, le Bluetooth, le GPRS etc...  Selon ceci, un système de futur devrait également avoir des fonctions pour commuter entre les technologies sans obtenir une connexion coupée comme résultat.

      Le handover vertical implique le déplacement entre différentes interfaces sans fil, par ex entre le réseau local sans fil (WLAN) et le Bluetooth.
      Plusieurs essais ont indiqué qu'un handover vertical est possible avec de petits délais.

      V.1 C'est quoi L'accès multiple 
      Traditionnellement les dispositifs utilisés pour la communication, y inclus les téléphones et les ordinateurs, étaient connectés à un et un seul  réseau mais avec les dispositifs mobiles, il est devenu désirable de se connecter à une sélection de différents réseaux.
      
      L'accès multiple n'est autre que la possibilité de système à combiner un nombre différent de technologies d'accès radio et/ou fixe. C'est une solution permettant l'utilisation simultanée de différents réseaux d'accès et des technologies dans un noeud mobile appelé Simultaneous Multi-Access. La différente circulation de trafic appartenant à différentes applications peut être transférée entre différents accès, indépendamment les uns des autres et d'une manière transparente aux applications.
      



      Les dispositifs attachés à des multiples réseaux sont connus sous le nom Multi-homed devices ou multi-mode devices. Les dispositifs multi-mode doivent être capables de se déplacer hors de la marge du réseau et dans celle d'un autre.
      
      V.2 Description du Handover vertical
      Un handover vertical est défini comme handover entre les stations de base qui emploient différentes interfaces de réseau sans fil (wireless network interface), comparé au handover horizontal qui est un handover entre différentes stations de base avec la même interface de réseau sans fil. 
      Le handover vertical est une technique qui permet à un utilisateur mobile d'errer entre les réseaux sans fil multiples d'une sorte complètement transparente aux applications et aux utilisateurs et qui perturbe le moins possible la connexion. Une fois on se trouve en dehors de la gamme, le système devrait automatiquement commuter à une autre station de base, sans se déconnecter. S'il y a plus d'une interface disponible le système devra décider laquelle il faut employer. Une des difficultés avec le handover vertical est de commuter entre les réseaux comme s'il n'y avait pas de coupure et avec peu de perte de données en tant que possible.

      Pour un utilisateur, une telle connexion signifie que les dispositifs qui ont accès au réseau peuvent être utilisés dans tous les réseaux sans nécessité de recharger ou remettre en marche des dispositifs ou des applications.
      
      En deux mots nous pouvons dire que le handover vertical n'est autre qu'une commutation, sans coupure ou théoriquement sans coupure, entre deux réseaux de technologies différentes, maintenant la même connexion.

      V.3 Pourquoi le Handover Vertical
      Un système capable de faire le handover vertical ouvre beaucoup de nouvelles possibilités. Nous pouvons employer différentes technologies du réseau et différents nets d'une manière flexible sans couper la connexion courante à l'Internet.
      La mobilité deviendra alors réalité. Le potentiel additionnel est la possibilité pour définir des politiques pour l'accès net. Des règles peuvent être définies pour employer le LAN au lieu de WaveLAN dans la portée de l'optimisation de largeur de bande, quand le LAN est disponible. Un autre scénario serait le WaveLAN est meilleur marché quand il est présent et GPRS dans d'autres cas.

      Le but de Vertical Handover est de réaliser plusieurs accès en temps réel dans les réseaux hétérogènes. Ceci permet à un utilisateur d'utiliser plusieurs réseaux (tels qu'IPv4, WLAN, GPRS, UMTS, et 2G/3G) en parallèle.

      Les problèmes à surmonter lors du Handover vertical sont ceux de réservation de la connexion quand il faut commuter entre différentes interfaces. Plus spécifiquement le problème est de maintenir une connexion ouverte, il faut alors  avoir la même adresse d'IP quoiqu'il y ait un changement de sous-réseaux (en raison de changement d'interfaces).
      
      
      Une fois l'idée de mobilité existe, la vision s'est déviée vers le Mobile IP pour faire le handover vertical et cela pour assurer l'identification du mobile quand il quitte son réseau mère et passe dans un réseau étranger. Alors qu'à l'instant il y a une tendance à utiliser le MVPN (Mobile Virtual Private Network) pour arriver à cette fin.
      Dans les paragraphes suivants nous allons parler brièvement du Mobile IP tout en expliquant la manière de réservation de la connexion du mobile, nous présentons le Handover Vertical utilisant Mobile IP, et puis nous dévions notre étude vers le MVPN.

      V.4 IP mobile 
V.4.1 Description
      IP mobile est une manière de s'assurer qu'un utilisateur mobile réserve son adresse IP même en s'éloignant de son réseau mère. 
      IP mobile (MIPv4) est maintenant devenu un conducteur principal permettant la mobilité d'équipements, ceci est principalement du à l'expansion continue de l'Internet mobile, et spécialement du à sa compatibilité avec IP. Dans des développements plus récents, on a proposé IPv6 mobile (MIPv6), qui surmonte plusieurs imperfections dans MIPv4, offrant un plus grand espace d'adresse, une optimisation d'itinéraire, et une sécurité améliorée. A la différence de MIPv4 (sans optimisation d'itinéraire), MIPv6 est en soi optimisé en employant un mécanisme direct de notification aux noeuds qui connaissent et conduisent des paquets au nouvel endroit du noeud mobile.

      Pour que le système fonctionne, un agent mère (home agent) et un agent étranger (foreign agent) sont nécessaires. Quand l'utilisateur quitte le réseau mère et entre dans un réseau étranger, il aura deux adresses : l'adresse dans le réseau mère et une adresse temporaire (care-of-adresse). L'adresse dans le réseau mère est statique et identifie la connexion. Chaque mobile a un agent mère. L'agent mère est la destination où les paquets se dirigent si un mobile n'est pas connu, ou le reste du système ne comprend pas le protocole mobile. L'agent mère a une base de données mise à jour, elle précise où le mobile se trouve réellement (c.-à-d. qu'elle est l'adresse temporaire actuelle du mobile). Techniquement l'adresse temporaire est juste le point final d'un tunnel au mobile. Ladresse temporaire peut être l'adresse d'un agent étranger. L'agent étranger est le routeur qui est le plus proche du mobile. Ceci est également référé comme point d'attachement. Le care-of-adresse peut également être une adresse locale unique (Co-located care-of-adresse), permettant le traitement des fonctions nécessaires à l'intérieur du mobile, sans n'importe quel agent étranger. Ceci est particulièrement utile dans les réseaux qui n'ont pas déployé un agent étranger. Quand un mobile se déplace à un autre secteur, l'adresse temporaire change tandis que l'adresse au réseau mère demeure statique. Il est à noter que le mobile a la possibilité d'avoir plusieurs adresses temporaires.
      
      Les agents envoient des annonces avec ses adresses et avec quel type de services ils veulent fournir (par exemple à l'agent mère, l'agent étranger ou tous les deux). Quand l'utilisateur quitte le réseau mère et entre dans un réseau étranger il écoute ces annonces à partir des agents étrangers. L'agent étranger entre en contact avec l'agent mère des noeuds mobiles. Un tunnel est fait entre l'agent mère et l'agent étranger. L'agent mère envoie les paquets en tant que paquets encapsulés d'IP (par le tunnel) à l'agent étranger qui les expédie au noeud mobile. Si le noeud mobile est donné une adresse du public IP dans le réseau étranger il peut créer un tunnel directement à l'agent mère et les paquets sont envoyés par le tunnel de l'agent mère au noeud mobile. C'est une manière plus efficace depuis qu'il n'y a aucune expédition de l'agent étranger.

      Dans la figure suivante le correspondant est n'importe quel hôte dans le réseau, avec lequel le mobile échange l'information. Dans ce cas-ci le correspondant ne sait pas où se trouve l'équipement mobile. Il envoie ses paquets à son réseau mère en utilisant l'adresse principale (adresse au réseau mère) du mobile. Le mobile a donc toujours une base, où il est connecté.


Bref sommaire du trafic entre un correspondant et un MH

      En opération de base du mobile IP, des paquets envoyés par le correspondant au mobile sont toujours envoyés au réseau mère du mobile d'abord, et expédié par l'agent mère au mobile. Des paquets provenant du mobile sont envoyés directement au correspondant, formant de ce fait un itinéraire triangulaire. Ces paquets emploient l'adresse au réseau mère du mobile en tant qu'adresse de source pour préserver l'identité au réseau mère. Les paquets expédiés par l'agent mère à l'adresse temporaire sont encapsulés dans un autre paquet d'IP. Si un mobile est sur son réseau mère, il peut fonctionner comme s'il avait eu une connexion fixe sans aucune spécialité d'IP mobile.

      V.4.2 Associations
      Pour que les paquets arrivent vers le mobile, un de ses routeurs situé dans son réseau mère crée une association entre les adresses temporaires et le réseau mère. Ce routeur sera son agent mère. Celui-ci se comportera comme un proxy pour tous les paquets destinés à son adresse mère. L'avantage de ces associations est qu'elles permettent de diminuer la durée de transit des paquets en les routant tout de suite à la bonne adresse. 

      V.5 Handover vertical sous Mobile IP
      V.5.1 Introduction
      L'accès mobile à l'Internet croit rapidement, et augmente de plus en plus suite à la popularité croissante de WiFi (c.-à-d. les WLANs basés sur IEEE 802.11b), et au déploiement mondial des réseaux sans fil de large secteur tels que GPRS et la troisième génération des réseaux sans fils. Ainsi un nombre de plus en plus important de dispositifs mobiles tels que des laptops, PDAs et des handhelds est équipé pour se connecter aux réseaux multiples.

      IPv6 mobile peut jouer un rôle principal en intégrant ces différentes technologies de la couche liaison, avec la promesse de permettre la mobilité transparente par l'utilisation d'une couche réseau unifiée.

      Quand les utilisateurs mobiles émigrent de la couverture d'un point d'accès de réseau à l'autre, on dit qu'ils exécutent un handoff. La plupart des handoffs se produisent entre les points d'accès de la même technologie de réseau et se nomment les handoffs horizontaux. Les handoffs entre différents points d'accès appartenant aux différents réseaux (par exemple WLAN à Bleutooth) sont désignés sous le nom des handoffs verticaux, et posent un défi significatif plus grand.  
      
      La mobilité transparente a comme objectif de permettre aux utilisateurs mobiles de se déplacer sans coupure à travers des réseaux, que ce soit de câble ou radio, avec une rupture minimale des flux de paquet. Un mécanisme qui peut permettre ceci doit montrer une basse latence de handoff ; avec peu ou pas de perte de données (même dans les environnements fortement mobiles) ; balancer à de grands inter-réseaux ; adapter les différentes applications aux environnements de réseaux ; et finalement agir comme une conjoncture entre les environnements et les technologies hétérogènes sans compromettre sur les questions clés reliées à la sécurité et à la fiabilité.  
      
      En réalité c'est difficile à réaliser. Les technologies sans fil (ainsi que celles câblées) offrent des liens qui ont des caractéristiques considérablement variables. Les réseaux cellulaires de génération courante tels que GPRS et 3G offrent des largeurs de bande qui sont beaucoup plus hautes que ceux de leurs prédécesseurs, cependant, ils sont toujours significativement inférieures que WLANs. Ces larges variabilités dans des caractéristiques de link-layer peuvent poser un empêchement sérieux à fournir la mobilité transparente dans un environnement de recouvrement. 

      Un processus de handover dans IPv6 mobile est composé de deux étapes principales une décision et une exécution de handoff. Dans ce qui suit nous allons discuter comment une décision de handoff est complètement indépendante de son exécution, avec l'exécution contribuant vers la latence globale de handover.  L'exécution IPv6 mobile employant le processus de handoff est divisée en 3 trois parties, la détection, la configuration et l'enregistrement, dont chacune contribue à la latence globale de handover.

      V.5.2 Caractérisation du processus de HANDOFF
      Des réseaux sans fil  tels que GPRS et WLANs peuvent être arrangés comme recouvrement sur la base de leur couverture offerte ; un tel arrangement est connu comme réseau sans fil de recouvrement (wireless overlay network).  Par exemple, GPRS ou 3G peut fournir l'assurance nationale ou des larges continents, alors que WLANs bases sur 802.11b fournirent seulement une couverture locale sans fil ainsi que pour Bleutooth. Un mobile peut choisir de faire un handover vertical entre les différents réseaux ou non selon la couverture offerte.  
      
      Quand un dispositif mobile exécute un handoff du réseau fournissant une couverture plus rapide mais plus petite (par ex  WLANs), à un nouveau réseau plus haut dans le sens de couverture (par ex. GPRS), le handoff s'appelle un handoff vertical ascendant (upward). D'autre part, si le nouveau réseau auquel les handoffs mobiles de dispositif fournit seulement une couverture locale, il est connu comme handoff vertical descendant (downward). La direction du handoff est également importante pour permettre l'adaptation appropriée pendant des handovers verticaux dans les réseaux sans fil de recouvrement. 
      
      Comme nous avons dit le handover est caractérisé en deux étapes principales : un procédé de décision de handoff et un procédé d'exécution de handoff.

      V.5.2.1 La décision de Handoff
       La décision de Handoff est la capacité de décider quand exécuter un handoff. Ceci peut être exécuté par le mobile, il est dit alors mobile-controlled handoffs,  ou par le réseau, dans ce dernier cas il est dit alors network-controlled handoffs, ou même conjointement dans la coopération par tous les deux, c'est alors le mobile-assisted handoffs. 
      
      Cependant, à la différence des handoffs horizontaux, une décision verticale de handoff implique «si» aussi bien que «quand». Considérant que dans un handoff horizontal un dispositif mobile peut généralement exécuter un handoff tout en se déplaçant de la couverture d'un point d'accès à l'autre (basé sur la puissance du signal), la même méthode peut nécessairement ne pas se tenir pour les handoffs verticaux. Une décision au handoff vertical peut dépendre de plusieurs questions concernant le réseau auquel il est déjà relié et à celui qu'il va au handoff. Par exemple, la décision pour exécuter les handoffs contrôlés par le mobile peut être prise par un agent vertical de handoff, se reposant dans le dispositif mobile basé sur des politiques telles que la largeur de bande de réseau, la charge, la couverture, le coût, la sécurité, la QoS, ou même la préférence d'utilisateur. La préférence d'utilisateur est importante en exécutant les handoffs verticaux. Par exemple, si le nouveau réseau auquel un dispositif mobile exécute un handoff n'offre pas la sécurité, l'utilisateur peut décider d'employer l'ancien réseau. Dépendant de la couverture, un utilisateur peut souhaiter employer un lien sécurisé et cher pour son trafic officiel d'Email (par exemple en utilisant GPRS), mais peut choisir un lien moins cher pour accéder à l'information de Web (par exemple WLAN).  
      Dans un réseau sans fil de recouvrement, les handoffs peuvent être prévus ou imprévus. Des handoffs prévus sont habituellement employés pour optimiser les handoffs horizontaux, par exemple dans WLANs, basé sur des déclenchements de la couche 2 (L2) pendant les mouvements d'un dispositif mobile. Ces déclenchements L2 indiquent le statut de la couverture du nouveau réseau. Mais une fois, appliqués aux handoffs verticaux, les déclenchements L2 peuvent indiquer à un dispositif mobile ou à un routeur d'accès (dépendant du fait que le handoff est commandé par le mobile ou par le réseau) qu'il est maintenant sous la couverture du nouveau réseau (par exemple WLAN) et il peut souhaiter exécuter le handoff. Notons que tous les handoffs verticaux ascendants peuvent être prévus. Par contre, les handoffs verticaux descendants peuvent être prévus ou imprévus. D'autre part, les handoffs verticaux descendants imprévus supposeraient typiquement qu'un dispositif mobile est déjà sous la couverture du nouveau réseau, mais doit exécuter encore le handoff. Par exemple, un utilisateur peut préférer remettre un handoff à plus tard basé sur des conditions de ses applications, et peut exécuter un handoff plus tard, se rendant déjà compte du statut de la couverture du nouveau réseau.

      V.5.2.2. L'Exécution du Handoff
 	L'exécution du Handoff suppose que le dispositif mobile est sous la couverture du réseau auquel il va au handoff.  


Division de la latence de Handoff dans IPv6 mobile

      Trois étapes caractérisent le procédé d'exécution de handoff utilisant l'IP Mobile :

      Période de détection (td) C'est le temps mesuré à partir de l'instant où le noeud mobile est sous la couverture d'un nouveau réseau d'accès sans fil jusqu'à l'instant où il reçoit une annonce (router advertisement) du nouveau routeur d'accès. Quand le mobile est sous la couverture du nouveau réseau, il peut détecter cette couverture en utilisant soit la sollicitation de déclenchement du routeur, soit en attendant pour recevoir une annonce du routeur d'accès du réseau visité.  
      Dans la figure précédente, nous montrons un noeud mobile (MN) pro-actif envoyant une sollicitation du routeur (Rs). Dans la réponse, il reçoit une annonce (Ra) du routeur d'accès dans le réseau visité. En utilisant un tel schéma, un dispositif à plusieurs modes de fonctionnement peut immédiatement recevoir un Ra pour configurer sa nouvelle adresse. Cependant, ceci exige un déclenchement pour générer Rs à la couche de liaison ou de l'utilisateur. Alternativement, il peut attendre un Ra. Selon la dernière spécification, cet intervalle d'annonces du routeur peut être un minimum de 30ms à un maximum de 70ms. 

      Temps de Configuration (tc) C'est l'intervalle du temps mesuré à partir de l'instant où le dispositif mobile reçoit une annonce du routeur, au temps qu'il prenne pour mettre à jour sa table de routage, et assigner son interface avec une nouvelle adresse basée sur le préfixe du routeur d'accès et fournie par l'annonce du routeur.  

      Temps d'enregistrement (tr) C'est le temps requis pour envoyer une mise à jour à l'agent mère et au correspondant, et recevoir le premier paquet du correspondant supposant qu'un acquittement de l'agent mère a été reçue à l'avance. Notons que MIPv6 ne spécifie pas une attente d'un acquittement du correspondant, car il est facultatif, par conséquent, nous considérons seulement le cas quand un noeud mobile reçoit un paquet du correspondant.  
      
      Basé sur sa définition originale, nous définissons la latence du vertical handoff pour un mobile comme étant le temps nécessaire pour initialiser la déconnexion de l'ancien point d'accès du réseau pour recevoir le premier paquet du nouveau point d'accès de réseau. Ainsi, d'après la discussion ci-dessus, la latence totale de handoff (Th) peut être donnée par :
      
      Th = td + tc + tr

      L'équation de handoff suggère que le schéma d'optimisation de la latence du handoff vertical implique essentiellement l'optimisation de td et de tr, puisque tc dépend typiquement des possibilités de calcul du dispositif mobile. La période de détection td peut être réduite au minimum en augmentant la fréquence d'annonce du routeur, ou en employant des déclenchements de la couche liaison du réseau respectif afin de solliciter l'annonce du routeur d'accès dans le réseau visité. Cependant, le composant tr est une fonction de la latence du lien auquel le mobile veut exécuter le handoff.
       
      
      Maintenant nous avons eu une idée sur la manière avec laquelle le handover vertical est fait tout en utilisant le Mobile IP, passons alors à la présentation de la deuxième méthode basée sur MVPN, et discutons la possibilité de sa réussite.
      Tout d'abord nous  allons commencer par la présentation du MVPN puis du Handover vertical utilisant MVPN.
      
      V.6 Mobile IP VPN (Virtual Private Network)
V.6.1 Introduction 
      Un réseau privé virtuel (VPN) est un groupe d'ordinateurs connectés à un réseau privé (un réseau établi et maintenu par une seule entreprise pour son usage personnel avec un accès limité au réseau public), ce groupe communique d'une façon sécurisée au-dessus d'un réseau public.
      VPNs sont des réseaux logiques qui relient les réseaux physiques ou hosts entre eux en formant des tunnels chiffrés au-dessus des réseaux publics. 
      Un VPN a deux parties : le réseau d'accès et l'Internet publique pour se connecter à l'intranet. Le réseau d'accès peut être basé sur un réseau GPRS ou sur  un réseau WLAN.
      Les données VPNs ont été typiquement implantées à la couche liaison de données utilisant les technologies Frame Relay (Relais de trames) et ATM pendant approximativement dix années. Maintenant, les services de VPN basés sur IP et l'utilisation de l'Internet gagnent rapidement l'intérêt et l'acceptation sur le marché public. Comme les VPNs traditionnels, IP VPNs utilisent les équipements partagés pour émuler les réseaux privés et livrer les services fiables et sécurisés aux utilisateurs. Mobile IP VPNs, qui fournissent ces services au-dessus des réseaux sans fil, emploient également des technologies de tunnel d'IP (IP tunneling). 
      
      Un client de mobile VPN prolonge le concept de VPN aux employés mobiles et les clients qui, au lieu des laptops, portent maintenant les dispositifs de poche (PDA,). Ces dispositifs combinent un téléphone cellulaire avec un petit ordinateur qui peut fonctionner avec des applications communes de bureau telles que l'email. Dans ce cas-ci, l'utilisateur peut accéder au réseau d'entreprise de l'extérieur ou de l'intérieur du lieu de la corporation en utilisant une connexion sans fil. 
      Dans l'accès VPN mobile, on permet à des utilisateurs des connexions virtuelles au réseau de corporation. Les utilisateurs mobiles accèdent le même réseau de corporation comme s'ils étaient connectés sur place au réseau local (LAN). Pour atteindre ce genre de transparence, les paramètres de réseau (adresse de réseau interne, information de DNS, et de WINS) sont négociés avec les clients à distance. L'utilisateur mobile établit un tunnel d'IPSec VPN des mobilophones au passage de corporation au-dessus de l'Internet en utilisant la connexion sans fil tel que GSM, GPRS, ou le LAN sans fil (WLAN). Après que l'authentification réussie, l'utilisateur mobile gagne l'accès au réseau de corporation ainsi que la sécurité.
      
      
      La technologie Mobile VPN permet aux utilisateurs mobiles de se connecter  aux services sécurisés. Aujourd'hui, le besoin de mobile VPN vient principalement du monde de corporation où le nombre d'employés mobiles aussi bien que les associés et les clients qui ont besoin de l'accès à l'entreprise augmente. Les avantages d'affaires qui sont gagnés de la mobilité continuent à se développer dans le concept et la pratique, qui change le paysage d'entreprise.

      Les avantages d'affaires (business) de déployer mobile VPNs (MVPNs) sont nombreux, citons alors quelques uns : 
* Mobile IP VPNs aident les compagnies à retirer des avantages tels que des coûts nettement abaissés de WAN, une connexion globale améliorée, et une meilleure fiabilité, tout en activant des possibilités telles que des communications sécurisées d'extranet.  
* MVPNs peuvent fournir aux ouvriers à distance une connexion constante aux emplacements de la corporation ou aux ISPs et aux ASPs de leur choix.  
* MVPNs permettent également aux entreprises et aux ISPs de fournir un accès mobile à l'extérieur, en activant une connexion toujours active, ce qui permet alors le partage de l'information en temps réel.

      V.6.2 Mettre Mobiles VPNs en application 
      Divers types de réalisations de connexion de VPN sont possibles selon les besoins d'affaires de l'entreprise. Ces connexions peuvent être l'une des types suivantes: gateway-to-gateway, gateway-to-host, host-to-gateway, et host-to-host.

      De divers protocoles peuvent être employés pour mettre en application MVPN : IP Security (IPSec) protocols, Multi-Protocol Label Switching (MPLS) and L2 Tunneling Protocol (L2TP).
 
      IPSec est typiquement employé dans un des deux modes : gateway-to-gateway, host-to-gateway. Les 2 figures suivantes montrent ces 2 modes de réalisation de MVPN. La connexion gateway-to-gateway est l'implantation préférée de MVPN parce que la connexion bout à bout de host-to-gateway contient des importants points faibles.


La connexion Host-to-Gateway


La connexion Gateway-to-Gateway


      V.6.3 La Gateway mobile et la capacité de VPN 
      Beaucoup de choix existent pour construire un VPN pour connecter les réseaux de corporation. Des concentrateurs de VPN sont mis en application à Toronto, à Montréal et à Vancouver pour s'assurer que la capacité suffisante est disponible et des besoins opérationnels sont répondus. 
   
   Une implantation typique de la norme VPN des porteurs principaux inclurait : 
    
> Le support basé sur l'IPSec
> L'authentification d'entête : MD5 (algorithme de Message-Digest)  
> Encapsulating Security Payload : 3DES(triple Data Encription Standard):
> Internet Key Exchange : Diffie-Hellman 
> Aucune interface intégrée de l'autorité de certificat (CA) 
> Interface : 10 ou 100-Mbit/s Ethernet à  travers l'Internet 
> Connexions concourantes  d'Internet : 50+

      V.6.4 Les connexions fiables et à l'échelle des réseaux VPN
      Le prolongement du réseau d'entreprise aux mobilophones exige une infrastructure (réseau, gateways, gestion, outils) qui peut manipuler la gestion et le support des nombres massifs de nouveaux dispositifs. 
Un gateway peut se composer d'un noeud simple ou des noeuds multiples, souvent désigné sous le nom d'un faisceau des noeuds. Pour manipuler un nombre croissant d'utilisateurs concourants mobiles, de nouveaux noeuds peuvent être ajoutés au faisceau de gateway. Pendant que des noeuds additionnels sont ajoutés au gateway, la charge est automatiquement équilibrée pour inclure les nouveaux noeuds sans l'impact sur les noeuds courants. Pour assurer VPN service dans le cas de l'échec de noeud, toute l'information d'état de session, y compris l'information d'IPSec, est maintenue et le procédé d'écoulement a émigré à d'autres noeuds sans coupure. Ainsi, les associations de sécurité d'IPSec peuvent réellement se déplacer d'un noeud à un autre noeud en quelque sorte complètement transparent à l'autre point final de la session. Le résultat est la non rupture en service pour l'utilisateur, qui est particulièrement important pour les utilisateurs mobiles.

      V.6.5 Insuffisances de IKE pour Mobile IPv6
      Puisque Mobile IPv6 requiert une authentification par IKE, et que ce dernier fonctionne par certificat, utiliser la mobilité sur IPv6 à grande échelle et avec du roaming inter-opérateurs impose qu'à tout moment quiconque puisse vérifier la validité du certificat d'un correspondant. 
      Cette vérification n'est facilement réalisable que si la délivrance des certificats est incluse dans une organisation globale.

      Dans le cas de la mobilité des machines sur Internet, on pourrait imaginer que les opérateurs de réseaux mobiles gèrent et délivrent les certificats pour leurs propres clients. Quand ceux-ci veulent vérifier le certificat présenté par le client d'un autre opérateur de réseaux mobile, ils se réfèrent à une autorité de certification chapeautant tous les opérateurs.
      Certains proposent que cette PKI soit directement administrée par les états. Quoiqu'il en soit, ce manque de coordination a conduit à la situation actuelle où il n'est pas possible de fournir un service de roaming international et inter-opérateur basé sur la cryptographie asymétrique. Seul les systèmes à clé secrète tels que ceux du GSM marchent aujourd'hui. 

   IKE n'est pas si bien adapté à la mobilité IPv6, voici quelques problèmes qui paraissent rédhibitoires :
> Mobile IPv6 identifie actuellement les mobiles par leur adresse mère, par conséquent le certificat qui est utilisé dans la négociation doit être attaché à une machine et non à un utilisateur.
> IKE est un protocole qui nécessite l'envoi de plusieurs messages (au moins 6 dans le mode agressif, "aggressive mode"). D'une part ceci est beaucoup trop inefficace pour espérer faire un handover instantané, d'autre part, si le mobile fait un mouvement durant l'échange IKE, les automates des deux machines se trouvent désynchronisés : le mobile tente de continuer l'échange là où il l'avait interrompu avant le mouvement, alors que le correspondant qui ne reconnaît pas le mobile (il a changé d'adresse temporaire) recommence l'échange depuis le début. 
      V.7 Le handover vertical utilisant MVPN
V.7.1 Introduction
      Comme nous avons précédemment mentionné, l'utilisation des dispositifs mobiles augmente avec l'augmentation du nombre d'utilisateurs mobiles, et la plupart d'entre eux nécessite l'obtention d'une connexion mobile ainsi que sécurisée à leurs applications.
      Le but est donc d'avoir une connexion non pas seulement mobile mais encore sécurisée sans aucune intervention de l'utilisateur. En se déplaçant du LAN au WAN ou même à l'extérieur de l'office (GPRS/3G) l'utilisateur perçoit un seul réseau. Un système avec IEEE-802.11, Bluetooth, GPRS et UMTS, doit pouvoir automatiquement choisir de se connecter au réseau approprié selon les préférences de l'utilisateur concernant la vitesse, le prix, la consommation d'énergie et la disponibilité. Une cible spécifique est le marché pour IP-telephony sans fil. 
      V.7.2 Le système proposé
      A fin d'arriver à notre but, nous avons besoin de Mobile IP qui, comme il est mentionné précédemment, maintient la mobilité d'une façon transparente et sans aucune intervention de l'utilisateur. IPSec est le standard de sécurité qui est employé dans la plupart des VPNs pour maintenir la sécurité. Ainsi cela active une connexion automatique et sécurisée quand l'utilisateur se déplace vers un réseau non sécurisé.
      Quand les VPNs standards sont désignés pour les connexions point à point ou pour les utilisateurs stationnaires se connectant à distance, la solution que nous allons proposer est désignée spécialement pour les mobiles, offrant une connexion sécurisée aux réseaux des entreprises, sans prendre en compte le lieu duquel la connexion s'établie. Par suite les dispositifs mobiles peuvent errer entre les réseaux privés, publics et les réseaux visités privés sans coupure et d'une façon sécurisée, utilisant une variété des réseaux de communication incluant : les LANs câblés et sans fil, les VLANs et les réseaux public câblés et sans fil.
      Le réseau proposé et qui a pour but de supporter toutes ces caractéristiques est formé des composants suivants :
      1. Le serveur, il est responsable de la plupart des tâches, celles de la gestion de la sécurité tel que l'encryptions et l'authentification, et celles de la gestion de trafic de l'utilisateur. C'est un système avec une fonctionnalité complète de AAA pour fournir un handover transparent dans les réseaux multiples.
      Le serveur performe toutes ces tâches en reconnaissant les paquets IP et leurs destinations. Une fois il détermine que la destination n'est pas connectée physiquement au réseau mère, les paquets IP sont re-routés et envoyés au dispositif via l'adresse IP associée avec sa nouvelle position, connue sous le nom de l'adresse temporaire. Le serveur assure que les données restent sécurisées et cela à l'aide de la construction d'un tunnel IP authentifié et encrypté qui sera accompli par IPSec. Ce composant combine à la fois les fonctions de l'agent mère de Mobile IP ainsi que du serveur du VPN IPSec.
      2. Le Gateway, il agrège le trafic provenant des divers noeuds distants et l'envoie vers la position courante du Client en roaming. Ce gateway contient les fonctionnalités nécessaires pour supporter la mobilité et la sécurité des accès multiples. Il accepte le trafic du type IP-dans-IP et UDP provenant des Clients. 
      3. Le Client, il doit être un software qui sera installé dans le dispositif mobile utilisant le système Windows ou des PCs de poches (Pocket PC). Il gère ensemble, la connexion sécurisée au réseau et le choix de réseau totalement transparent à l'utilisateur. Une fois enlevé du LAN, le client commute automatiquement au WLAN et commence l'encryptions du trafic.
      La solution proposée manipule les adresses IP et les paquets IP, par suite la connexion de bout en bout entre deux pairs d'applications est maintenue pendant que le client est en roaming dans les réseaux de communication hétérogènes, traverse différents domaines d'IP, ou bien est stationnaire dans une site distante.
      Cette solution opère à la couche réseau de la pile TCP/IP. Cette couche est la plus logique place car elle est au dessus de la couche de liaison et par suite indépendante du lien physique et elle est au dessous de la couche d'application.
      En ce qui concerne l'enregistrement du client, le serveur envoie d'une façon périodique des messages en broadcast, ou des annonces et attend des messages d'enregistrement ou de désenregistrement de la part des clients. Ces messages de requêtes peuvent être reçus directement ou par l'intermédiaire d'un point de relais tel que l'agent étranger dans le Mobile IP. Et comme partie de l'enregistrement, le client informe le serveur de sa position actuelle et cela en lui envoyant son adresse temporaire qui va être utilisée par le serveur pour lui envoyer le trafic expédié à l'adresse permanente du client. Cet enregistrement fournie un moyen permettant au dispositif mobile de s'identifier au serveur tout en utilisant le protocole IP Mobile.
      Le client écoute continuellement les messages de broadcast qui sont envoyés fréquemment par le serveur. Et il est capable d'écouter ces messages à partir de toutes les interfaces physiques, et cela à l'aide d'une commutation de trafic transparente  et sans coupure.
      Après avoir être enregistré avec succès, un tunnel IP sera établi entre le serveur et le client. Ce tunnel joue le rôle d'un lien logique connectant le client directement à son réseau mère.
      Le gateway, contrairement au serveur, n'envoie aucune annonce, il accepte le trafic entrant provenant du client ainsi que les informations concernant le serveur auquel le client est associé, comme partie du paquet d'enregistrement. Quand le gateway est utilisé, le tunnel construit entre le client et le serveur reste ntact jusqu'à ce que le gateway décapsule et encapsule les paquets IP avec un entête propre d'IP tunneling activant alors un trafic sécurisé entre le serveur et le client.
      Bien sur dans le cas où il y a une multitude de réseaux valables pour communiquer au dessus, une sélection de la meilleure connexion sera faite.
      
CHAPITRE VI     Le  travail de Simulation
      
      Introduction
      
      Dans le but de simuler un handover vertical, il était nécessaire de choisir un logiciel permettant d'obtenir des bonnes résultats, le logiciel de simulation des réseaux le plus répandu à notre temps est le ns Network Simulator, cela revient au fait que les simulateurs courants fournissent rarement des outils pour la visualisation et l'interprétation des résultats, par contre NS possède autre que  le simulateur un NAM pour la visualisation.
      
      NS-2 est un simulateur à évènements à temps discrets orienté objet. Il est développé en C++ et en OTcl21; Le paquage inclus une hiérarchie de classe compilée d'objets écrits en C++ et une hiérarchie de classe interprétée d'objets écrits en OTcl. Ces deux hiérarchies sont étroitement liées; quand l'utilisateur crée un nouvel objet par l'interpréteur OTcl, un objet correspondant appelé objet reflet est aussi crée dans la hiérarchie compilée. On dit que ces objets sont des « objets fendus ». Bien entendu, les objets peuvent être accédés aussi bien en OTcl qu'en C++ grâce à la mise en place de procédures d'appel entre OTcl et C++.
      Le langage OTcl est un langage interprété qui ne demande pas de compilation. Il est principalement utilisé pour concaténer des objets, accéder aux objets à partir de l'interpréteur et configurer des simulations. Son utilisation est rapide et assez conviviale.
      D'un autre côté, C++ est utilisé pour créer les classes de base et pour traiter un grand nombre de données (tel que calcul des tables de routage, mouvement des mobiles).
      
      
      Maintenant ayant choisi le logiciel, nous allons passer à la précision de ce que nous devrons faire comme simulation.
      
      VI.1 Divers cas de simulation
      Nous avons 3 phases à faire:
      
      1- La première consiste à regarder combien dure l'étape de découverte et d'établissement de connexion entre un noeud esclave et un noeud maître dans Bluetooth.
      2- La seconde consiste à essayer de créer un noeud à 2 interfaces, une interface wifi et une autre Bluetooth.
      3- La troisième consiste à essayer de simuler un Handover vertical entre un réseau wifi et un réseau Bluetooth.
      
      VI.2 Le scénario de départ
      Le but final étant de simuler un Handover Vertical entre un réseau wifi et un réseau Bluetooth, j'ai pensé alors à proposer un scénario concernant le passage d'un noeud du réseau wifi au réseau Bluetooth et vice versa.

La figure suivante illustre le scénario proposé.
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      Au départ le noeud est en communication avec l'Access Point du réseau wifi, il est en mouvement, se déplace vers le réseau de Bluetooth tout en s'éloignant du réseau wifi, une fois il entre dans la zone de couverture du maître Bluetooth, il se connecte, alors à cet instant, à ce nouveau tout en coupant sa connexion avec l'AP et tout en concervant l'application courante.
      
      Le deuxième cas n'est autre que l'inverse de ce scénario.
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      Le noeud qui est sous la couverture du maître de Bleutooth et communique avec lui, se déplace vers le réseau wifi tout en s'éloignant du réseau Bluetooth, une fois il entre dans la zone de couverture du point d'accès de wifi, il se connecte à ce nouveau tout en coupant sa connexion avec le maître de Bluetooth et bien sûr, tout en concervant l'application courante.
      
      Ayant défini le scénario, voyons alors comment les appliquer sur ns et quelle version est celle qui est convenable et nécessaire.
      
      Par défaut, le logiciel NS ne permet pas de simuler un réseau wifi en mode d'infrastructure, il permet la simulation du mode ad'hoc, alors pour le faire un patch existe comme extension de ns, mais ce dernier nécessite l'utilisation de la version ns-2.26 avec laquelle il est compatible, on peut télécharger le patch de:
      ftp://public:public@62.173.120.243/ns-AP-patch7.tgz
      
      Maintenant pour simuler Bluetooth, une extension faite pour ns, dite BlueHoc, nous permet ça.
      
      VI.3 BlueHoc
      Le programme de simulation BlueHoc implémente des caractéristiques de base, de la bande de base, du Logical Link Control et de l'Adaptation Protocol (L2CAP) et du Link Manager Protocol (LMP) de Bluetooth.
      
      La structure du noeud Bluetooth (Tcl class, BTNode) est un objet global utilisé pour simuler un dispositif Bluetooth dans BlueHoc. Cette classe est dérivée de la classe Node dans ns et hérite ses membres. Les membres spécifiques de Bluetooth sont implémentés dans C++ et peuvent être configurés à partir de l'interface Tcl/Tk. La commande qu'on utilise pour créer un BTNode est la suivante :
      
      Set btnode [new BTNode <ip_addr> <bd_addr> <0 or 1> <x co-ordinate><y co-ordinate>]
      
      Où :
      - bd_addr est l'adresse du dispositif Bluetooth. Les adresses Bluetooth comme les adresses Ethernet sont 48 bits, mais dans cette simulation les adresses Bluetooth sont restreintes à 32 bits. 
      - Le second argument est 0 si nous voulons créer un noeud esclave et 1 si nous voulons créer un noeud maître. 
      - X et y co-ordinates sont spécifiés en mètre. 
      
      La figure suivante montre la structure d'un noeud Bluetooth maître.
      
      
      
      
      
      


      
      
      Il est très important de noter ici que BlueHoc nécessite la version ns-2.1b7a ou ns-2.1b8a pour qu'il fonctionne, ce qui implique qu'il est impossible de simuler un réseau wifi en mode d'infrastructure avec un réseau Bluetooth dans la même version de ns avec ce qui existe des extensions de ns, sinon on est obligé de refaire tout un travail complet fait au paravent et ce n'est pas notre but de projet pour le faire (car ça prend beaucoup de temps).
      Ces limitations nous ont poussé à changer un peu dans le scénario.
       
      VI.4 Le nouveau scénario
      Au lieu d'avoir un réseau wifi en mode d'infrastructure nous utilisons un réseau wifi en mode ad'hoc. 
      
      Dans ce cas là, tout en se déplaçant, un noeud passe de ce réseau au réseau Bluetooth en état de handover, bien sur ce noeud en mouvement a 2 interfaces (wifi et Bluetooth) et il est dit multihomed device.
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      Pour le cas inverse, le noeud passe du réseau Bluetooth, coupe sa connexion avec le maître et se met en communication en mode ad'hoc avec les autres noeuds Wifi.
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      Jusqu'à l'instant, nous pouvons dire que le nouveau scénario (après modification) peut être implémenter sur la version ns-2.1b7a ou ns-2.1b8a qui sont les deux versions compatibles avec Bluetooth.
      
      VI.5 Noeud à 2 interfaces
      Maintenant comment obtenir un noeud avec 2 interfaces différentes? Jusqu'à l'instant auquel j'ai commencé à développer cette idée, aucune extension dans ns n'était pas capable de le faire (il n'était pas encore présent), une suite d'idées me trouvent présenter:
      
      1- Ecrire une fonction qui prend comme paramètre celui qui précise l'interface active.
      2- Une et une seule des 2 interfaces doit être active à un instant donné.
      3- Au début de la simulation le noeud a comme interface active celle de wifi et il communique  en ad'hoc avec les autres noeuds wifi.
      4- Une fois le noeud entre dans la zone de couverture du maître de Bluetooth, il commute ses interfaces et rend l'interface de Bleutooth celle qui est active.
      5- L'interface de Bluetooth étant active, le noeud se déplaçant vers le réseau wifi, commute ses interfaces quand il sera dans les limites du réseau ad'hoc et rend l'interface de wifi celle qui est active.
      6- Une nécessité existe c'est de transférer tous les paquets lors du changement de l'interface, c-à-d la commutation des interfaces ne doit pas entraîner la perte de l'application courante.
      
      Au fur et à mesure que j'essais d'appliquer ces idées, j'étais en train de suivre tout nouveau dans ns, et étant en train de travailler, et avant d'aboutir au résultat final une nouvelle extension de ns se trouve publier c'est le SCTP Agents, et il m'a paru que cette extension peut me résoudre le problème, voyons alors c'est quoi le SCTP Agents.
      
      VI.6 SCTP Agents
      Les agents SCTP sont tous des agents bi-directionnels, cela veut dire qu'ils sont symétriques dans le sens qu'ils représentent un expéditeur et un récepteur. Cependant, des données bi-directionnelles n'ont pas été encore mises en application. Chaque instance d'un agent de SCTP est un expéditeur ou récepteur.


Noeud multimode

      
      En raison de l'architecture de NS, un noeud ne peut pas réellement être multihomed. Pour dépasser cette limitation, chaque noeud multihomed se compose réellement de plus d'un noeud. Comme représenté sur le schéma précédent, un noeud multihomed a un "noeud de noyau" (core node) et il a un "noeud d'interface" (interface node) pour chaque interface simulée. L'agent de SCTP réside sur tous ces noeuds, mais le trafic va seulement aux et à partir des noeuds d'interface. Le noeud de noyau est employé pour le routage et est relié à chaque noeud d'interface par l'intermédiaire d'un lien unidirectionnel vers le noeud d'interface, mais le trafic ne traverse pas ces liens. Au lieu de cela, ces liens sont employés pour déterminer dynamiquement quel noeud d'interface sortant nous allons employer pour envoyer à une destination particulière.

      VI.7 Quelques commandes utilisées dans SCTP
      SCTP fournit certaines commandes qui peuvent être employées dans des scripts de TCL :

      set-multihome-core place le noeud de noyau pour des points multihomed terminaux (multihomed endpoint). Prend 1 argument de type noeud. Obligatoire pour des points multihomed terminaux et ne doit pas être placé plus d'une fois par point terminal.

      multihome-add-interface Ajoute une interface à un point multihomed terminal. Prend 2 arguments de type noeud. L'argument 1 est le noeud de noyau du point multihomed terminal. L'argument 2 est le noeud d'interface à ajouter. Obligatoire pour des points multihomed terminaux. Toutes les interfaces doivent être ajoutées après que set-multihome-core s'appelle et avant que multihome-attach-agent s'appelle.

      multihome-attach-agent Attache un agent de SCTP à un point multihomed terminal. Prend 2 arguments. L'argument 1 est le noeud de noyau. L'argument 2 est l'agent de SCTP. Obligatoire pour des points multihomed terminaux.

      set-primary-destination Place le noeud d'interface du point terminal de pair comme destination primaire. Prend 1 argument de type noeud. Facultatif et peut être placé plus d'une fois par point final. Si elle n'est pas utilisée, une destination primaire est choisie automatiquement.

      force-source Place le noeud d'interface à partir duquel des paquets seront envoyés. Prend 1 argument de type noeud. Facultatif et peut être placé plus d'une fois par point terminal. Si non utilisée, la conduite choisira automatiquement la source par base de paquet.

      Dans notre cas le noeud multihomed que nous allons créer va être composé de trois noeuds, le noeud de noyau, un noeud wifi et un noeud Bluetooth.

      Les instructions qui réalisent ça sont:

      set host0_core [$ns node]
      set host0_if0 [$ns node]
      set host0_if1 [$ns btnode]
      $ns multihome-add-interface $host0_core $host0_if0
      $ns multihome-add-interface $host0_core $host0_if1
      set sctp0 [new Agent/SCTP]
      $ns multihome-attach-agent $host0_core $sctp0

      L'instruction suivante permet de préciser que le noeud wifi est celui de départ:

      $sctp0 set-primary-destinatin $host1_if0

      Comme nous avons vu, SCTP peut nous résoudre le problème du noeud à deux interfaces, mais ce SCTP nécessite pour être mis en application la version ns-2.1b8a ou ns-2.26.
      D'où, il sera alors obligatoire d'utiliser le ns-2.1b8a pour pouvoir simuler le scénario proposé.

      VI.8 Evaluation du temps de connexion d'un noeud esclave dans Bluetooth 
      Dans le but d'évaluer le temps de connexion d'un noeud esclave et par suite mesurer combien dure l'étape de découverte et d'établissement de connexion entre un noeud esclave et un noeud maître dans Bluetooth, on a utilisé une extension de ns-2, c'est le bleuhoc. 
      
      Comme dans bleutooth un maître peut avoir au maximum 7 esclaves, j'ai essayé alors de mesurer ces temps pour 7 cas différents, commençant avec 7 esclaves tout en arrivant à 1 esclave et cela en enlevant à chaque fois un noeud.
      
      Les coordonnées de chaque esclave sont choisis de telle sorte à ce que chacun d'eux soit équidistant du maître pour ne pas donner à l'un d'eux plus de chance que l'autre lors de la connexion.
      
      Les paramètres indiquant la position des 8 noeuds (1 maître et 7 esclaves) sont les suivants:
      set Sim(xpos_) [list 1.46 2.96 3.76 7.7 7.32 7.12 6.02 1.96]
      set Sim(ypos_) [list 4.54 1.4 3.16 2.66 4.14 5.76 6.96 6.74]

      Bien sûr, les positions sont choisies de telle sorte que les esclaves soient proches du maître, si non il ne puisse pas les voir.
      
	Les paramètres indiquant le temps de départ sont:
	set StartTime [list 0.0 0.2 0.1 0.3 0.4 0.5 0.6 0.7]
	
      Typiquement, le maître se met en fonction avant les esclaves c'est pourquoi on a choisi un temps de départ nul.
      
      Le nombre de réponses nécessaire à partir d'une requête (inquiry), doit être inférieur ou égal au nombre des esclaves, et pour les cas qu'on a testés on l'a choisi égal au nombre des esclaves.
      
      Notons ici qu'il est possible de changer le nombre de réponses nécessaire et par suite les résultats obtenus changent, par exemple si on a un seul esclave et on impose que le nombre de réponses soit égal à 1, le processus d'inquiry va s'arrêter tout de suite après la réponse de l'esclave, donc le temps de découverte mesuré est inférieur à ce qu'on peut obtenir si on impose le nombre de réponses égal à 2.
      
      VI.8.1 Premier cas
      Pour le premier cas où on a 7 esclaves, on a alors:
      set NumResponses 7
      
      L'inquiry timeout est typiquement de l'ordre de 10.24
      set InqTimeout 32768
      
      L'inquiry scan offset est typiquement compris entre 0 et 2.56
      set InqScanOffset [list 6400 3200 3840 4160 640 3840 2880]
      
      Le temps de simulation choisi est de 20s:
      set SimulationTime 20.0
      
      L'application utilisée est celle de la voix tout en utilisant le générateur de trafic de ns:
      set Sim(Application) [list Traffic/Exponential Traffic/Exponential Traffic/Exponential Traffic/Exponential Traffic/Exponential Traffic/Exponential Traffic/Exponential]
      
      La couche de transport utilisée est le UDP:
      set Sim(Transport) [list UDP UDP UDP UDP UDP UDP UDP]
      
      Une fois tous les paramètres précisés, on commence la simulation.
      
      Les résultats obtenus donnent les graphes suivants:

	1- En prenant comme axe horizontal celui indiquant les noeuds esclaves, c-à-d 1 indique le noeud 1, 2 indique le noeud 2 et ainsi de suite, on obtient le graphe suivant (pour les 7 cas différents). On remarque qu'un noeud bien précis ne se connecte pas toujours au même instant quelque soit le nombre d'esclaves, parfois c'est le cas comme il est indiqué sur la figure suivante pour les 2 noeuds 5 et 6.

      
      


On remarque que le temps de connexion Tc varie entre 3.088393e+00 et 9.760892e+00 pour les divers noeuds dans les 7 cas.
	
	2- Maintenant en prenant comme axe horizontal le numéro du noeud qui se connecte c-à-d 1 indique le premier noeud qui se connecte dans chacun des 7 cas, 5 indique le cinquième noeud qui se connecte, on obtient le graphe suivant (pour les 7 cas différents).

      
      
      
      
      L'axe vertical est toujours celui du temps.
      
      VI.8.2 Deuxième cas 
      En prenant un temps de départ identique pour tous les noeuds esclaves (0.1 sec), et comme valeur pour InquiryTimeOut=44000, on trouve:
      
      1- En prenant comme axe horizontal celui indiquant les noeuds esclaves.
      
      
      
      
      2- Maintenat en prenant comme axe horizontal le numéro du noeud qui se connecte.
      
      
      
      
      
      VI.8.3 Troisième cas
      Maintenant en laissant encore le même temps de départ des noeuds esclaves, mais en prenant une valeur de 2200 pour InquiryTimeOut, on trouve:
      
1- En prenant comme axe horizontal celui indiquant les noeuds esclaves.

      
      
      
2- Maintenant en prenant comme axe horizontal le numéro du noeud qui se connecte.


      


      VI.9 Problèmes
      L'un des problèmes que nous avons rencontrés lors de la simulation sur ns est l'incompatibilité entre les divers versions, par suite, une extension faite pour une version ne travaille pas pour une autre version, ce qui pause alors des grandes limitations dans le travail, et nous obligent parfois à changer dans notre travail.

 Conclusions et Perspectives

   Notre objectif, précisé dès le départ, était de balayer les diverses technologies de communications sans fils que se soient celles de couverture locale (WLAN, 802.11 et Bluetooth) ou de couverture globale (GPRS et UMTS), dans le but à arriver à la combinaison de ces technologies ensemble et à aboutir à passer d'une à une autre d'une façon transparente et sans aucune perte.
   Pour arriver là, il a fallu traverser beaucoup d'obstacles et passer des heures à apprendre, concevoir, installer et même programmer. Il était très difficile de trouver des informations significatives sur l'Internet, surtout que le sujet que nous abordons est un sujet très récent et les études déjà faites et publiées sont très peu. Je peux dire qu'il n'y a aucun article, ni aucun site, ni aucun paragraphe se trouvant dans un article qui se rapporte de façon ou d'autre à mon sujet, que je n'ai lus.
      Le standard international IEEE 802.11 décrit les caractéristiques d'un réseau local sans fil, son réseau est basé sur une architecture cellulaire où le système est divisé en des cellules BSS dont chacune est contrôlée par une station de base AP.
      Les stations, se trouvant dans le BSS, communiquent ensemble soit directement l'un avec l'autre en mode ad'hoc, soit via l'AP en mode d'infrastructure.
      Différentes normes wifi existent, 802.11f est celle qui s'occupe du roaming intertechnologie, elle propose le protocole Inter-Access point roaming protocol IAPP permettant à un utilisateur itinérant de changer de point d'accès de façon transparente lors d'un déplacement, quelles que soient les marques des points d'accès présentes dans l'infrastructure réseau.
      La technologie de communication radiofréquence courte distance Bluetooth qui est conçue principalement pour remplacer les différents câbles par une connexion radio universelle permettant une communication entre tous les équipements électroniques, ne peut pas prendre la place de la norme 802.11, par contre nous pouvons dire qu'elle est son complémentaire.
      Le Handover entre ces différents types de réseaux devient alors une nécessité ainsi qu'un potentiel qui ouvre la porte à beaucoup des applications. 
   
   Quant à la partie purement pratique de mon travail, je peux évoquer les points suivants :
( Se familiariser avec le logiciel choisi NS était une phase délicate, cela revient au fait que ce logiciel utilise plusieurs langages de programmation, TCL, OTCl et le C++. Par suite, pour un cas comme le mien où il était nécessaire de créer quelque chose qui n'existe pas encore dans NS, il était nécessaire d'entrer dans plusieurs détails qui ne peuvent du tout être classifiés comme faciles. 
( J'ai affronté un grand problème qui n'était pas prévu dès le départ, c'est le problème de l'incompatibilité existante dans NS, par suite un patch qui fonctionne normalement sur une version de NS, ne fonctionne pas sur une autre. Et vu que le scénario que j'ai proposé nécessite l'utilisation de plus d'un patch tel que chacun d'eux fonctionne sur une version différentes de NS, je me trouve devant un seul choix, c'est de changer un peu dans le scénario de telle sorte à conserver le but désiré et dans le même temps dépasser le problème d'incompatibilité.
( Toutefois, il est nécessaire de noter à ce stade là que l'installation de NS ainsi que des patch correspondants pose pas mal de difficultés, parfois ça dépend du PC lui-même et des programmes qui y sont installés et parfois il donne des erreurs sans savoir même quelles sont les causes. 
   
      Finalement, il faut bien signaler quelques perspectives pour l'avenir. Avoir la possibilité de maintenir deux connexions en même temps, par exemple une connexion via Bluetooth, nous permettant de faire une connexion à l'Internet et par suite faire un téléchargement d'un fichier, et simultanément une connexion via Wifi nous permettant de nous connecter à un autre mobile. 
      Encore une idée concernant le MVPN, jusqu'à maintenant IKE pose une insuffisance pour être mobile, je croix qu'il est nécessaire de travailler sur ce point de telle sorte à ce qu'on cesse d'utiliser le Mobile IP, et il devient alors suffisant pour nous d'utiliser les VPNs pour réaliser un Handover Vertical sécurisé.
      Signalons en fin que ce sujet est très récent et cette étude est plutôt le sujet d'une thèse. Le travail que j'ai fait n'est qu'une introduction et il reste beaucoup du travail à faire.
      

Annexes

*****************************************************************
Dans cet annexe, on a les mesures obtenues lors de la simulation du bleuhoc, on a 7 cas de mesures, pour chaque cas le nombre de noeuds est augmenté de 1.
CON-i: indique le temps en sec de connexion du noeud i 
POLL-i: indique l'instant auquel le maître envois à l'esclave i un paquet de type POLL pour vérifier que la connexion s'est bien passée.
Les coordonnés x et y pour les 8 noeuds sont les suivants:
       X:  1.46 2.96 3.76 7.7 7.32 7.12 6.02 1.96
       Y:  4.54 1.4 3.16 2.66 4.14 5.76 6.96 6.74
Les paramètres indiquant le temps de départ sont:
	StartTime: 0.0 0.2 0.1 0.3 0.4 0.5 0.6 0.7
Le nombre de réponses: NumResponses 7
L'inquiry timeout: InqTimeout 32768
L'inquiry scan offset: InqScanOffset [list 6400 3200 3840 4160 640 3840 2880]
Le temps de simulation: SimulationTime 20.0
*****************************************************************
***********************************************
1 esclave
***********************************************
CON-1:3.299643e+00
POLL-1:3.301205e+00
***********************************************
2 esclaves
***********************************************
CON-1:9.760892e+00
POLL-1:9.762455e+00

CON-2:7.369642e+00
POLL-2:7.371205e+00
***********************************************
3 esclaves
***********************************************
CON-1:9.760892e+00
POLL-1:9.762455e+00

CON-2:7.369642e+00
POLL-2:7.371205e+00

CON-3:9.060892e+00
POLL-3:9.062455e+00
***********************************************
4 esclaves
***********************************************
CON-1:8.462142e+00
POLL-1:8.463705e+00

CON-2:3.488393e+00
POLL-2:3.489955e+00

CON-3:7.769642e+00
POLL-3:7.771205e+00

CON-4:5.379642e+00
POLL-4:5.381205e+00
***********************************************
5 esclaves
***********************************************
CON-1:5.880892e+00
POLL-1:5.882455e+00

CON-2:3.488393e+00
POLL-2:3.489955e+00

CON-3:5.178392e+00
POLL-3:5.179955e+00

CON-4:5.379642e+00
POLL-4:5.381205e+00

CON-5: 3.088393e+00
POLL-5:3.089955e+00
***********************************************
6 esclaves
***********************************************
CON-1:5.880892e+00
POLL-1:5.882455e+00

CON-2:3.488393e+00
POLL-2:3.489955e+00

CON-3:5.178392e+00
POLL-3:5.179955e+00

CON-4:5.379642e+00
POLL-4:5.381205e+00

CON-5:3.088393e+00
POLL-5:3.089955e+00

CON-6:5.478392e+00
POLL-6:5.479955e+00
***********************************************
7 esclaves
***********************************************
CON-1:8.462142e+00
POLL-1:8.463705e+00

CON-2:3.488393e+00
POLL-2:3.489955e+00

CON-3:5.178392e+00
POLL-3:5.179955e+00

CON-4:7.960892e+00
POLL-4:7.962455e+00

CON-5:3.088393e+00
POLL-5:3.089955e+00

CON-6:5.478392e+00
POLL-6:5.479955e+00

CON-7:7.869642e+00
POLL-7:7.871205e+00

*****************************************************************
Ces mesures sont faites pour un temps de depart identiques pour tous les esclaves (0.1s) et InqTimeOut-->44000
*****************************************************************
***********************************************
1 esclave
***********************************************
CON-1:3.199643e+00
POLL-1:3.201205e+00
***********************************************
2 esclaves
***********************************************
CON-1:7.069642e+00
POLL-1:7.071205e+00

CON-2:6.069642e+00
POLL-2:6.071205e+00
***********************************************
3 esclaves
***********************************************
CON-1:5.780892e+00
POLL-1:5.782455e+00

CON-2:3.488393e+00
POLL-2:3.489955e+00

CON-3:3.688393e+00
POLL-3:3.689955e+00
***********************************************
4 esclaves
***********************************************
CON-1:9.660892e+00
POLL-1:9.662455e+00

CON-2:6.069642e+00
POLL-2:6.071205e+00

CON-3:8.860892e+00
POLL-3:8.862455e+00

CON-4:6.370892e+00
POLL-4:6.372455e+00
***********************************************
5 esclaves
***********************************************
CON-1:1.353339e+01
POLL-1:1.353495e+01

CON-2:
POLL-2:

CON-3:8.860892e+00
POLL-3:8.862455e+00

CON-4:1.283339e+01
POLL-4:1.283495e+01

CON-5:6.569642e+00
POLL-5:6.571205e+00
***********************************************
6 esclaves
***********************************************
CON-1:8.362142e+00
POLL-1:8.363705e+00

CON-2:7.369642e+00
POLL-2:7.371205e+00

CON-3:4.978393e+00
POLL-3:4.979955e+00

CON-4:7.660892e+00
POLL-4:7.662455e+00

CON-5:2.688393e+00
POLL-5:2.689955e+00

CON-6:4.988392e+00
POLL-6:4.989955e+00
***********************************************
7 esclaves
***********************************************
CON-1:1.740464e+01
POLL-1:1.740620e+01

CON-2:7.369642e+00
POLL-2:7.371205e+00

CON-3:1.660464e+01
POLL-3:1.660620e+01

CON-4:1.412464e+01
POLL-4:1.412620e+01

CON-5:6.569642e+00
POLL-5:6.571205e+00
Pour le noeud 6 il y a seulement des messages d'inquiry, puis des FHS_PKT sans FHS_ACK et par suite pas de page... (C'est le start time qui a causé ça)
CON-6:
POLL-6:

CON-7:9.750892e+00
POLL-7:9.752455e+00

*****************************************************************
Ces mesures sont faites pour un temps de depart identiques pour tous les esclaves (0.1s) et pour un InqTimeOut-->2200
*****************************************************************

***********************************************
1 esclave
***********************************************
CON-1:7.070892e+00
POLL-1:7.072455e+00
***********************************************
2 esclaves
***********************************************
CON-1:7.069642e+00
POLL-1:7.071205e+00

CON-2:6.069642e+00
POLL-2:6.071205e+00
***********************************************
3 esclaves
***********************************************
CON-1:5.780892e+00
POLL-1:5.782455e+00

CON-2:3.488393e+00
POLL-2:3.489955e+00

CON-3:3.688393e+00
POLL-3:3.689955e+00
***********************************************
4 esclaves
***********************************************
CON-1:8.362142e+00
POLL-1:8.363705e+00

CON-2:6.069642e+00
POLL-2:6.071205e+00

CON-3:6.269642e+00
POLL-3:6.271205e+00

CON-4:8.850892e+00
POLL-4:8.852455e+00
***********************************************
5 esclaves
***********************************************
CON-1:1.353339e+01
POLL-1:1.353495e+01

Pour le noeud 2 il y a seulement des messages d'inquiry, puis des FHS_PKT sans FHS_ACK et par suite pas de page...
CON-2:
POLL-2:

CON-3:8.860892e+00
POLL-3:8.862455e+00

CON-4:1.283339e+01
POLL-4:1.283495e+01

CON-5:6.569642e+00
POLL-5:6.571205e+00
***********************************************
6 esclaves
***********************************************
CON-1:8.362142e+00
POLL-1:8.363705e+00

CON-2:7.369642e+00
POLL-2:7.371205e+00

CON-3:4.978393e+00
POLL-3:4.979955e+00

CON-4:7.660892e+00
POLL-4:7.662455e+00

CON-5:2.688393e+00
POLL-5:2.689955e+00

CON-6:4.988392e+00
POLL-6:4.989955e+00
***********************************************
7 esclaves
***********************************************
CON-1:1.224339e+01
POLL-1:1.224495e+01

CON-2:4.778393e+00
POLL-2:4.779955e+00

CON-3:7.569642e+00
POLL-3:7.571205e+00

CON-4:1.025214e+01
POLL-4:1.025370e+01

CON-5:2.688393e+00
POLL-5:2.689955e+00

Pour le noeud 6 il y a seulement des messages d'inquiry, puis des FHS_PKT sans FHS_ACK et par suite pas de page...
CON-6:
POLL-6:

CON-7:5.969642e+00
POLL-7:5.971205e+00

References

I- Bibliographies

[1] Kawthar Sethom, Nadia Khouja et Hossam Afifi "Etude de performance de Bluetooth et intégration avec le 802.11" Département RSt, Groupe Internet Mobile INT, France
[2] Jim Zyren, AI Petrick "IEEE 802.11 Tutorial"
[3] ORINOCO "Inter Access Point Protocol (IAPP)"
[4] duolog "WLAN Access Point IAPP Solution", 2002 
[5] Pär Johansson, Jonas Nilsson, Andreas Persson, Terese Persson, Jon Rönnols "Vertical handover project", 2003
[6] Rajiv Chakravorty, Pablo Vidales, Leo Patanapongpibul, Kavitha Subramanian, Ian Pratt, Jon Crowcroft "On Inter-network Handover Performance using Mobile IPv6"
[7] Maximilian Riegel "Schnittstellen und Protokolle für Wireless LANs", WLAN Standardization / 2001-11-19
[8] Oliver Tyce "Handover Optimisation"
[9] "The Evolution of VPN and its Implications for Mobile Phone Security", April 2003
[10] Hyun-Sang jang "BlueWIN-Bluetooth Wireless Indoor Network overcomes many shortcomings of Bluetooth " 2002
[11] Jean Tourrilhes "Bluetooth roaming proposals", 9 October 00
[12] Caroline Lebre, Richard Titmuss "Handover between heterogeneoius IP networks for mobile services"
[13] Jouni Korhonen, TeliaSonera "Vertical Handovers and Simultaneous Multi-Accsee-Operator's view", February 24,2003
[14] "Mobile IP VPN Connectivey AND Security" 
[15] "VIATORES", September 10, 2002


II- Sites d'Internet

http://www.cisco.com/ipj (Mobile IP)
http://www.80211-planet.com
http://www.802.11hotspots.com
http://www.Bluetooth.com
http://www.motorola.com/Bluetooth 
http://reseaux-telecoms.net





97


